{"version":3,"sources":["common.js","intro.min.js","ng-file-upload-shim.min.js","ng-file-upload.min.js","please-wait.min.js","selectize.min.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3CA;AACA;ACDA;AACA;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA","file":"all.js","sourcesContent":["/**\n * @brief Loading indicator PleaseWait\n * @author Created by yjkwak\n * @date 2016. 3. 2.\n * @description\n *  Usage : loading(true);\n */\nvar loading_screen;\n\nfunction loading(bShow) {\n    if (bShow) {\n        loading_screen = pleaseWait({\n            logo: '/images/logo.png',\n            backgroundColor: '#2c3e50',\n            loadingHtml: '<div class=\"sk-double-bounce\"><div class=\"sk-child\"></div><div class=\"sk-child sk-double-bounce2\"></div></div>'\n        });\n    } else {\n        loading_screen.finish();\n    }\n}\n\n/**\n * 화보 사진관리 시작 가이드\n */\nfunction helpAlbumImages() {\n    if (!(/\\/albums\\/\\d+/).test(location.pathname)) {\n        alert('화보 사진관리 페이지\\n(화보 중 하나를 클릭하여 사진들 목록이 나타나는 페이지)\\n에서 다시 클릭하여 주십시오.');\n        return;\n    }\n\n    var intro = introJs();\n    intro.setOptions({\n        steps: [\n            {\n                intro: \"화보 사진 관리 안내입니다.\"\n            }, {\n                element: document.querySelector('.jumbotron .media-body .media'),\n                intro: \"컨트롤 버튼들입니다.\"\n            }, {\n                element: document.querySelector('#btnAddImage'),\n                intro: \"현 화보 사진 추가 페이지로 이동. 사진 다중업로드 가능.\"\n            }, {\n                element: document.querySelector('#btnSort'),\n                intro: \"드래그하여 변경한 사진들 순서를 영구 저장.\"\n            }, {\n                element: document.querySelector('#btnCreateBanner'),\n                intro: \"외부 삽입위한 배너 생성.<br>아래 사진 목록중 첫 6컷을<br>한 이미지에 모아 배열.\"\n            }, {\n                element: document.querySelector('#btnEditAlbum'),\n                intro: \"화보 정보 수정\"\n            }, {\n                element: document.querySelector('#btnDelAlbum'),\n                intro: \"화보 제거. 주의 - 복구 불가.\"\n            }, {\n                element: document.querySelector('#btnMoveSelected'),\n                intro: \"선택한 사진들을 다른 화보로 이동\"\n            }, {\n                element: document.querySelector('#btnDelSelected'),\n                intro: \"선택한 사진들을 삭제.<br>주의 - 복구 불가.\"\n            }, {\n                element: document.querySelector('.thumbnails .thumbnail:nth-child(1)'),\n                intro: \"현 화보에 등록된 사진입니다.<ul><li>클릭시 선택상태로 전환됨</li><li>다중 선택 가능</li><li>더블클릭시 수정페이지로 이동함</li><li>드래그하여 순서 변경 후 [순서적용]</li></ul>\",\n                position: 'top'\n            }, {\n                element: document.querySelector('.jumbotron .album-banner'),\n                intro: \"기사에 첨부할 배너 이미지.<br>[배너생성] 버튼으로 생성.\"\n            }, {\n                element: document.querySelector('.btn-copy-banner'),\n                intro: \"클릭하면 기사입력기 본문의<br>이지윅에디터에 붙여넣기 할 수 있도록 클립보드에 복사함.\"\n            }, {\n                intro: \"화보 사진 관리 안내를 마칩니다.\"\n            }\n        ]\n    });\n\n    intro.start();\n}\n","(function(C,p){\"object\"===typeof exports?p(exports):\"function\"===typeof define&&define.amd?define([\"exports\"],p):p(C)})(this,function(C){function p(a){this._targetElement=a;this._introItems=[];this._options={nextLabel:\"Next &rarr;\",prevLabel:\"&larr; Back\",skipLabel:\"Skip\",doneLabel:\"Done\",tooltipPosition:\"bottom\",tooltipClass:\"\",highlightClass:\"\",exitOnEsc:!0,exitOnOverlayClick:!0,showStepNumbers:!0,keyboardNavigation:!0,showButtons:!0,showBullets:!0,showProgress:!1,scrollToElement:!0,overlayOpacity:0.8,\npositionPrecedence:[\"bottom\",\"top\",\"right\",\"left\"],disableInteraction:!1,hintPosition:\"top-middle\",hintButtonLabel:\"Got it\"}}function P(a){var b=[],c=this;if(this._options.steps)for(var d=0,f=this._options.steps.length;d<f;d++){var e=y(this._options.steps[d]);e.step=b.length+1;\"string\"===typeof e.element&&(e.element=document.querySelector(e.element));if(\"undefined\"===typeof e.element||null==e.element){var g=document.querySelector(\".introjsFloatingElement\");null==g&&(g=document.createElement(\"div\"),\ng.className=\"introjsFloatingElement\",document.body.appendChild(g));e.element=g;e.position=\"floating\"}null!=e.element&&b.push(e)}else{f=a.querySelectorAll(\"*[data-intro]\");if(1>f.length)return!1;d=0;for(e=f.length;d<e;d++){var g=f[d],k=parseInt(g.getAttribute(\"data-step\"),10);0<k&&(b[k-1]={element:g,intro:g.getAttribute(\"data-intro\"),step:parseInt(g.getAttribute(\"data-step\"),10),tooltipClass:g.getAttribute(\"data-tooltipClass\"),highlightClass:g.getAttribute(\"data-highlightClass\"),position:g.getAttribute(\"data-position\")||\nthis._options.tooltipPosition})}d=k=0;for(e=f.length;d<e;d++)if(g=f[d],null==g.getAttribute(\"data-step\")){for(;\"undefined\"!=typeof b[k];)k++;b[k]={element:g,intro:g.getAttribute(\"data-intro\"),step:k+1,tooltipClass:g.getAttribute(\"data-tooltipClass\"),highlightClass:g.getAttribute(\"data-highlightClass\"),position:g.getAttribute(\"data-position\")||this._options.tooltipPosition}}}d=[];for(f=0;f<b.length;f++)b[f]&&d.push(b[f]);b=d;b.sort(function(a,c){return a.step-c.step});c._introItems=b;Q.call(c,a)&&\n(z.call(c),a.querySelector(\".introjs-skipbutton\"),a.querySelector(\".introjs-nextbutton\"),c._onKeyDown=function(b){if(27===b.keyCode&&!0==c._options.exitOnEsc)void 0!=c._introExitCallback&&c._introExitCallback.call(c),A.call(c,a);else if(37===b.keyCode)D.call(c);else if(39===b.keyCode)z.call(c);else if(13===b.keyCode){var d=b.target||b.srcElement;d&&0<d.className.indexOf(\"introjs-prevbutton\")?D.call(c):d&&0<d.className.indexOf(\"introjs-skipbutton\")?(c._introItems.length-1==c._currentStep&&\"function\"===\ntypeof c._introCompleteCallback&&c._introCompleteCallback.call(c),void 0!=c._introExitCallback&&c._introExitCallback.call(c),A.call(c,a)):z.call(c);b.preventDefault?b.preventDefault():b.returnValue=!1}},c._onResize=function(a){r.call(c,document.querySelector(\".introjs-helperLayer\"));r.call(c,document.querySelector(\".introjs-tooltipReferenceLayer\"))},window.addEventListener?(this._options.keyboardNavigation&&window.addEventListener(\"keydown\",c._onKeyDown,!0),window.addEventListener(\"resize\",c._onResize,\n!0)):document.attachEvent&&(this._options.keyboardNavigation&&document.attachEvent(\"onkeydown\",c._onKeyDown),document.attachEvent(\"onresize\",c._onResize)));return!1}function y(a){if(null==a||\"object\"!=typeof a||\"undefined\"!=typeof a.nodeType)return a;var b={},c;for(c in a)b[c]=\"undefined\"!=typeof jQuery&&a[c]instanceof jQuery?a[c]:y(a[c]);return b}function z(){this._direction=\"forward\";\"undefined\"===typeof this._currentStep?this._currentStep=0:++this._currentStep;if(this._introItems.length<=this._currentStep)\"function\"===\ntypeof this._introCompleteCallback&&this._introCompleteCallback.call(this),A.call(this,this._targetElement);else{var a=this._introItems[this._currentStep];\"undefined\"!==typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element);K.call(this,a)}}function D(){this._direction=\"backward\";if(0===this._currentStep)return!1;var a=this._introItems[--this._currentStep];\"undefined\"!==typeof this._introBeforeChangeCallback&&this._introBeforeChangeCallback.call(this,a.element);\nK.call(this,a)}function A(a){var b=a.querySelector(\".introjs-overlay\");if(null!=b){b.style.opacity=0;setTimeout(function(){b.parentNode&&b.parentNode.removeChild(b)},500);var c=a.querySelector(\".introjs-helperLayer\");c&&c.parentNode.removeChild(c);(c=a.querySelector(\".introjs-tooltipReferenceLayer\"))&&c.parentNode.removeChild(c);(a=a.querySelector(\".introjs-disableInteraction\"))&&a.parentNode.removeChild(a);(a=document.querySelector(\".introjsFloatingElement\"))&&a.parentNode.removeChild(a);if(a=document.querySelector(\".introjs-showElement\"))a.className=\na.className.replace(/introjs-[a-zA-Z]+/g,\"\").replace(/^\\s+|\\s+$/g,\"\");if((a=document.querySelectorAll(\".introjs-fixParent\"))&&0<a.length)for(c=a.length-1;0<=c;c--)a[c].className=a[c].className.replace(/introjs-fixParent/g,\"\").replace(/^\\s+|\\s+$/g,\"\");window.removeEventListener?window.removeEventListener(\"keydown\",this._onKeyDown,!0):document.detachEvent&&document.detachEvent(\"onkeydown\",this._onKeyDown);this._currentStep=void 0}}function F(a,b,c,d,f){var e=\"\",g,k;f=f||!1;b.style.top=null;b.style.right=\nnull;b.style.bottom=null;b.style.left=null;b.style.marginLeft=null;b.style.marginTop=null;c.style.display=\"inherit\";\"undefined\"!=typeof d&&null!=d&&(d.style.top=null,d.style.left=null);if(this._introItems[this._currentStep]){e=this._introItems[this._currentStep];e=\"string\"===typeof e.tooltipClass?e.tooltipClass:this._options.tooltipClass;b.className=(\"introjs-tooltip \"+e).replace(/^\\s+|\\s+$/g,\"\");k=this._introItems[this._currentStep].position;if((\"auto\"==k||\"auto\"==this._options.tooltipPosition)&&\n\"floating\"!=k){e=k;g=this._options.positionPrecedence.slice();k=G();var x=t(b).height+10,q=t(b).width+20,l=t(a),m=\"floating\";l.left+q>k.width||0>l.left+l.width/2-q?(s(g,\"bottom\"),s(g,\"top\")):(l.height+l.top+x>k.height&&s(g,\"bottom\"),0>l.top-x&&s(g,\"top\"));l.width+l.left+q>k.width&&s(g,\"right\");0>l.left-q&&s(g,\"left\");0<g.length&&(m=g[0]);e&&\"auto\"!=e&&-1<g.indexOf(e)&&(m=e);k=m}e=t(a);a=t(b);g=G();switch(k){case \"top\":c.className=\"introjs-arrow bottom\";H(e,f?0:15,a,g,b);b.style.bottom=e.height+20+\n\"px\";break;case \"right\":b.style.left=e.width+20+\"px\";e.top+a.height>g.height?(c.className=\"introjs-arrow left-bottom\",b.style.top=\"-\"+(a.height-e.height-20)+\"px\"):c.className=\"introjs-arrow left\";break;case \"left\":f||!0!=this._options.showStepNumbers||(b.style.top=\"15px\");e.top+a.height>g.height?(b.style.top=\"-\"+(a.height-e.height-20)+\"px\",c.className=\"introjs-arrow right-bottom\"):c.className=\"introjs-arrow right\";b.style.right=e.width+20+\"px\";break;case \"floating\":c.style.display=\"none\";b.style.left=\n\"50%\";b.style.top=\"50%\";b.style.marginLeft=\"-\"+a.width/2+\"px\";b.style.marginTop=\"-\"+a.height/2+\"px\";\"undefined\"!=typeof d&&null!=d&&(d.style.left=\"-\"+(a.width/2+18)+\"px\",d.style.top=\"-\"+(a.height/2+18)+\"px\");break;case \"bottom-right-aligned\":c.className=\"introjs-arrow top-right\";L(e,0,a,b);b.style.top=e.height+20+\"px\";break;case \"bottom-middle-aligned\":c.className=\"introjs-arrow top-middle\";c=e.width/2-a.width/2;f&&(c+=5);L(e,c,a,b)&&(b.style.right=null,H(e,c,a,g,b));b.style.top=e.height+20+\"px\";\nbreak;default:c.className=\"introjs-arrow top\",H(e,0,a,g,b),b.style.top=e.height+20+\"px\"}}}function H(a,b,c,d,f){if(a.left+b+c.width>d.width)return f.style.left=d.width-c.width-a.left+\"px\",!1;f.style.left=b+\"px\";return!0}function L(a,b,c,d){if(0>a.left+a.width-b-c.width)return d.style.left=-a.left+\"px\",!1;d.style.right=b+\"px\";return!0}function s(a,b){-1<a.indexOf(b)&&a.splice(a.indexOf(b),1)}function r(a){if(a&&this._introItems[this._currentStep]){var b=this._introItems[this._currentStep],c=t(b.element),\nd=10;I(b.element)&&(a.className+=\" introjs-fixedTooltip\");\"floating\"==b.position&&(d=0);a.setAttribute(\"style\",\"width: \"+(c.width+d)+\"px; height:\"+(c.height+d)+\"px; top:\"+(c.top-5)+\"px;left: \"+(c.left-5)+\"px;\")}}function R(){var a=document.querySelector(\".introjs-disableInteraction\");null===a&&(a=document.createElement(\"div\"),a.className=\"introjs-disableInteraction\",this._targetElement.appendChild(a));r.call(this,a)}function K(a){\"undefined\"!==typeof this._introChangeCallback&&this._introChangeCallback.call(this,\na.element);var b=this,c=document.querySelector(\".introjs-helperLayer\"),d=document.querySelector(\".introjs-tooltipReferenceLayer\"),f=\"introjs-helperLayer\";t(a.element);\"string\"===typeof a.highlightClass&&(f+=\" \"+a.highlightClass);\"string\"===typeof this._options.highlightClass&&(f+=\" \"+this._options.highlightClass);if(null!=c){var e=d.querySelector(\".introjs-helperNumberLayer\"),g=d.querySelector(\".introjs-tooltiptext\"),k=d.querySelector(\".introjs-arrow\"),x=d.querySelector(\".introjs-tooltip\"),q=d.querySelector(\".introjs-skipbutton\"),\nl=d.querySelector(\".introjs-prevbutton\"),m=d.querySelector(\".introjs-nextbutton\");c.className=f;x.style.opacity=0;x.style.display=\"none\";if(null!=e){var h=this._introItems[0<=a.step-2?a.step-2:0];if(null!=h&&\"forward\"==this._direction&&\"floating\"==h.position||\"backward\"==this._direction&&\"floating\"==a.position)e.style.opacity=0}r.call(b,c);r.call(b,d);if((h=document.querySelectorAll(\".introjs-fixParent\"))&&0<h.length)for(f=h.length-1;0<=f;f--)h[f].className=h[f].className.replace(/introjs-fixParent/g,\n\"\").replace(/^\\s+|\\s+$/g,\"\");h=document.querySelector(\".introjs-showElement\");h.className=h.className.replace(/introjs-[a-zA-Z]+/g,\"\").replace(/^\\s+|\\s+$/g,\"\");b._lastShowElementTimer&&clearTimeout(b._lastShowElementTimer);b._lastShowElementTimer=setTimeout(function(){null!=e&&(e.innerHTML=a.step);g.innerHTML=a.intro;x.style.display=\"block\";F.call(b,a.element,x,k,e);d.querySelector(\".introjs-bullets li > a.active\").className=\"\";d.querySelector('.introjs-bullets li > a[data-stepnumber=\"'+a.step+'\"]').className=\n\"active\";d.querySelector(\".introjs-progress .introjs-progressbar\").setAttribute(\"style\",\"width:\"+M.call(b)+\"%;\");x.style.opacity=1;e&&(e.style.opacity=1);-1===m.tabIndex?q.focus():m.focus()},350)}else{var p=document.createElement(\"div\"),l=document.createElement(\"div\"),c=document.createElement(\"div\"),n=document.createElement(\"div\"),s=document.createElement(\"div\"),w=document.createElement(\"div\"),E=document.createElement(\"div\"),u=document.createElement(\"div\");p.className=f;l.className=\"introjs-tooltipReferenceLayer\";\nr.call(b,p);r.call(b,l);this._targetElement.appendChild(p);this._targetElement.appendChild(l);c.className=\"introjs-arrow\";s.className=\"introjs-tooltiptext\";s.innerHTML=a.intro;w.className=\"introjs-bullets\";!1===this._options.showBullets&&(w.style.display=\"none\");for(var p=document.createElement(\"ul\"),f=0,C=this._introItems.length;f<C;f++){var y=document.createElement(\"li\"),B=document.createElement(\"a\");B.onclick=function(){b.goToStep(this.getAttribute(\"data-stepnumber\"))};f===a.step-1&&(B.className=\n\"active\");B.href=\"javascript:void(0);\";B.innerHTML=\"&nbsp;\";B.setAttribute(\"data-stepnumber\",this._introItems[f].step);y.appendChild(B);p.appendChild(y)}w.appendChild(p);E.className=\"introjs-progress\";!1===this._options.showProgress&&(E.style.display=\"none\");f=document.createElement(\"div\");f.className=\"introjs-progressbar\";f.setAttribute(\"style\",\"width:\"+M.call(this)+\"%;\");E.appendChild(f);u.className=\"introjs-tooltipbuttons\";!1===this._options.showButtons&&(u.style.display=\"none\");n.className=\"introjs-tooltip\";\nn.appendChild(s);n.appendChild(w);n.appendChild(E);!0==this._options.showStepNumbers&&(h=document.createElement(\"span\"),h.className=\"introjs-helperNumberLayer\",h.innerHTML=a.step,l.appendChild(h));n.appendChild(c);l.appendChild(n);m=document.createElement(\"a\");m.onclick=function(){b._introItems.length-1!=b._currentStep&&z.call(b)};m.href=\"javascript:void(0);\";m.innerHTML=this._options.nextLabel;l=document.createElement(\"a\");l.onclick=function(){0!=b._currentStep&&D.call(b)};l.href=\"javascript:void(0);\";\nl.innerHTML=this._options.prevLabel;q=document.createElement(\"a\");q.className=\"introjs-button introjs-skipbutton\";q.href=\"javascript:void(0);\";q.innerHTML=this._options.skipLabel;q.onclick=function(){b._introItems.length-1==b._currentStep&&\"function\"===typeof b._introCompleteCallback&&b._introCompleteCallback.call(b);b._introItems.length-1!=b._currentStep&&\"function\"===typeof b._introExitCallback&&b._introExitCallback.call(b);A.call(b,b._targetElement)};u.appendChild(q);1<this._introItems.length&&\n(u.appendChild(l),u.appendChild(m));n.appendChild(u);F.call(b,a.element,n,c,h)}!0===this._options.disableInteraction&&R.call(b);l.removeAttribute(\"tabIndex\");m.removeAttribute(\"tabIndex\");0==this._currentStep&&1<this._introItems.length?(l.className=\"introjs-button introjs-prevbutton introjs-disabled\",l.tabIndex=\"-1\",m.className=\"introjs-button introjs-nextbutton\",q.innerHTML=this._options.skipLabel):this._introItems.length-1==this._currentStep||1==this._introItems.length?(q.innerHTML=this._options.doneLabel,\nl.className=\"introjs-button introjs-prevbutton\",m.className=\"introjs-button introjs-nextbutton introjs-disabled\",m.tabIndex=\"-1\"):(l.className=\"introjs-button introjs-prevbutton\",m.className=\"introjs-button introjs-nextbutton\",q.innerHTML=this._options.skipLabel);m.focus();a.element.className+=\" introjs-showElement\";h=v(a.element,\"position\");\"absolute\"!==h&&\"relative\"!==h&&(a.element.className+=\" introjs-relativePosition\");for(h=a.element.parentNode;null!=h&&\"body\"!==h.tagName.toLowerCase();){c=v(h,\n\"z-index\");n=parseFloat(v(h,\"opacity\"));u=v(h,\"transform\")||v(h,\"-webkit-transform\")||v(h,\"-moz-transform\")||v(h,\"-ms-transform\")||v(h,\"-o-transform\");if(/[0-9]+/.test(c)||1>n||\"none\"!==u&&void 0!==u)h.className+=\" introjs-fixParent\";h=h.parentNode}S(a.element)||!0!==this._options.scrollToElement||(n=a.element.getBoundingClientRect(),h=G().height,c=n.bottom-(n.bottom-n.top),n=n.bottom-h,0>c||a.element.clientHeight>h?window.scrollBy(0,c-30):window.scrollBy(0,n+100));\"undefined\"!==typeof this._introAfterChangeCallback&&\nthis._introAfterChangeCallback.call(this,a.element)}function v(a,b){var c=\"\";a.currentStyle?c=a.currentStyle[b]:document.defaultView&&document.defaultView.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue(b));return c&&c.toLowerCase?c.toLowerCase():c}function I(a){var b=a.parentNode;return\"HTML\"===b.nodeName?!1:\"fixed\"==v(a,\"position\")?!0:I(b)}function G(){if(void 0!=window.innerWidth)return{width:window.innerWidth,height:window.innerHeight};var a=document.documentElement;\nreturn{width:a.clientWidth,height:a.clientHeight}}function S(a){a=a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom+80<=window.innerHeight&&a.right<=window.innerWidth}function Q(a){var b=document.createElement(\"div\"),c=\"\",d=this;b.className=\"introjs-overlay\";if(\"body\"===a.tagName.toLowerCase())c+=\"top: 0;bottom: 0; left: 0;right: 0;position: fixed;\",b.setAttribute(\"style\",c);else{var f=t(a);f&&(c+=\"width: \"+f.width+\"px; height:\"+f.height+\"px; top:\"+f.top+\"px;left: \"+f.left+\"px;\",b.setAttribute(\"style\",\nc))}a.appendChild(b);b.onclick=function(){!0==d._options.exitOnOverlayClick&&(void 0!=d._introExitCallback&&d._introExitCallback.call(d),A.call(d,a))};setTimeout(function(){c+=\"opacity: \"+d._options.overlayOpacity.toString()+\";\";b.setAttribute(\"style\",c)},10);return!0}function w(){var a=this._targetElement.querySelector(\".introjs-hintReference\");if(a){var b=a.getAttribute(\"data-step\");a.parentNode.removeChild(a);return b}}function N(){for(var a=0,b=this._introItems.length;a<b;a++){var c=this._introItems[a];\nO.call(this,c.hintPosition,c.element,c.targetElement)}}function T(a){w.call(this);var b=this._targetElement.querySelector('.introjs-hint[data-step=\"'+a+'\"]');b&&(b.className+=\" introjs-hidehint\");\"undefined\"!==typeof this._hintCloseCallback&&this._hintCloseCallback.call(this,a)}function U(){var a=this,b=document.querySelector(\".introjs-hints\");null==b&&(b=document.createElement(\"div\"),b.className=\"introjs-hints\");for(var c=0,d=this._introItems.length;c<d;c++){var f=this._introItems[c];if(!document.querySelector('.introjs-hint[data-step=\"'+\nc+'\"]')){var e=document.createElement(\"a\");e.href=\"javascript:void(0);\";(function(b,c,d){b.onclick=function(e){e=e?e:window.event;e.stopPropagation&&e.stopPropagation();null!=e.cancelBubble&&(e.cancelBubble=!0);V.call(a,b,c,d)}})(e,f,c);e.className=\"introjs-hint\";I(f.element)&&(e.className+=\" introjs-fixedhint\");var g=document.createElement(\"div\");g.className=\"introjs-hint-dot\";var k=document.createElement(\"div\");k.className=\"introjs-hint-pulse\";e.appendChild(g);e.appendChild(k);e.setAttribute(\"data-step\",\nc);f.targetElement=f.element;f.element=e;O.call(this,f.hintPosition,e,f.targetElement);b.appendChild(e)}}document.body.appendChild(b);\"undefined\"!==typeof this._hintsAddedCallback&&this._hintsAddedCallback.call(this)}function O(a,b,c){c=t.call(this,c);switch(a){default:case \"top-left\":b.style.left=c.left+\"px\";b.style.top=c.top+\"px\";break;case \"top-right\":b.style.left=c.left+c.width+\"px\";b.style.top=c.top+\"px\";break;case \"bottom-left\":b.style.left=c.left+\"px\";b.style.top=c.top+c.height+\"px\";break;\ncase \"bottom-right\":b.style.left=c.left+c.width+\"px\";b.style.top=c.top+c.height+\"px\";break;case \"bottom-middle\":b.style.left=c.left+c.width/2+\"px\";b.style.top=c.top+c.height+\"px\";break;case \"top-middle\":b.style.left=c.left+c.width/2+\"px\",b.style.top=c.top+\"px\"}}function V(a,b,c){\"undefined\"!==typeof this._hintClickCallback&&this._hintClickCallback.call(this,a,b,c);var d=w.call(this);if(parseInt(d,10)!=c){var d=document.createElement(\"div\"),f=document.createElement(\"div\"),e=document.createElement(\"div\"),\ng=document.createElement(\"div\");d.className=\"introjs-tooltip\";d.onclick=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0};f.className=\"introjs-tooltiptext\";var k=document.createElement(\"p\");k.innerHTML=b.hint;b=document.createElement(\"a\");b.className=\"introjs-button\";b.innerHTML=this._options.hintButtonLabel;b.onclick=T.bind(this,c);f.appendChild(k);f.appendChild(b);e.className=\"introjs-arrow\";d.appendChild(e);d.appendChild(f);this._currentStep=a.getAttribute(\"data-step\");g.className=\n\"introjs-tooltipReferenceLayer introjs-hintReference\";g.setAttribute(\"data-step\",a.getAttribute(\"data-step\"));r.call(this,g);g.appendChild(d);document.body.appendChild(g);F.call(this,a,d,e,null,!0)}}function t(a){var b={};b.width=a.offsetWidth;b.height=a.offsetHeight;for(var c=0,d=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c+=a.offsetLeft,d+=a.offsetTop,a=a.offsetParent;b.top=d;b.left=c;return b}function M(){return 100*(parseInt(this._currentStep+1,10)/this._introItems.length)}var J=function(a){if(\"object\"===\ntypeof a)return new p(a);if(\"string\"===typeof a){if(a=document.querySelector(a))return new p(a);throw Error(\"There is no element with given selector.\");}return new p(document.body)};J.version=\"2.0\";J.fn=p.prototype={clone:function(){return new p(this)},setOption:function(a,b){this._options[a]=b;return this},setOptions:function(a){var b=this._options,c={},d;for(d in b)c[d]=b[d];for(d in a)c[d]=a[d];this._options=c;return this},start:function(){P.call(this,this._targetElement);return this},goToStep:function(a){this._currentStep=\na-2;\"undefined\"!==typeof this._introItems&&z.call(this);return this},nextStep:function(){z.call(this);return this},previousStep:function(){D.call(this);return this},exit:function(){A.call(this,this._targetElement);return this},refresh:function(){r.call(this,document.querySelector(\".introjs-helperLayer\"));r.call(this,document.querySelector(\".introjs-tooltipReferenceLayer\"));return this},onbeforechange:function(a){if(\"function\"===typeof a)this._introBeforeChangeCallback=a;else throw Error(\"Provided callback for onbeforechange was not a function\");\nreturn this},onchange:function(a){if(\"function\"===typeof a)this._introChangeCallback=a;else throw Error(\"Provided callback for onchange was not a function.\");return this},onafterchange:function(a){if(\"function\"===typeof a)this._introAfterChangeCallback=a;else throw Error(\"Provided callback for onafterchange was not a function\");return this},oncomplete:function(a){if(\"function\"===typeof a)this._introCompleteCallback=a;else throw Error(\"Provided callback for oncomplete was not a function.\");return this},\nonhintsadded:function(a){if(\"function\"===typeof a)this._hintsAddedCallback=a;else throw Error(\"Provided callback for onhintsadded was not a function.\");return this},onhintclick:function(a){if(\"function\"===typeof a)this._hintClickCallback=a;else throw Error(\"Provided callback for onhintclick was not a function.\");return this},onhintclose:function(a){if(\"function\"===typeof a)this._hintCloseCallback=a;else throw Error(\"Provided callback for onhintclose was not a function.\");return this},onexit:function(a){if(\"function\"===\ntypeof a)this._introExitCallback=a;else throw Error(\"Provided callback for onexit was not a function.\");return this},addHints:function(){a:{var a=this._targetElement;this._introItems=[];if(this._options.hints)for(var a=0,b=this._options.hints.length;a<b;a++){var c=y(this._options.hints[a]);\"string\"===typeof c.element&&(c.element=document.querySelector(c.element));c.hintPosition=c.hintPosition||\"top-middle\";null!=c.element&&this._introItems.push(c)}else{c=a.querySelectorAll(\"*[data-hint]\");if(1>c.length)break a;\na=0;for(b=c.length;a<b;a++){var d=c[a];this._introItems.push({element:d,hint:d.getAttribute(\"data-hint\"),hintPosition:d.getAttribute(\"data-hintPosition\")||this._options.hintPosition,tooltipClass:d.getAttribute(\"data-tooltipClass\"),position:d.getAttribute(\"data-position\")||this._options.tooltipPosition})}}U.call(this);document.addEventListener?(document.addEventListener(\"click\",w.bind(this),!1),window.addEventListener(\"resize\",N.bind(this),!0)):document.attachEvent&&(document.attachEvent(\"onclick\",\nw.bind(this)),document.attachEvent(\"onresize\",N.bind(this)))}return this}};return C.introJs=J});\n","/*! 9.0.9 */\n!function(){function a(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])}function b(a,b,c){try{Object.defineProperty(a,b,{get:c})}catch(d){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw\"AJAX is not supported. XMLHttpRequest is not defined.\";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var c=function(a){if(!a.__listeners){a.upload||(a.upload={}),a.__listeners=[];var b=a.upload.addEventListener;a.upload.addEventListener=function(c,d){a.__listeners[c]=d,b&&b.apply(this,arguments)}}};a(\"open\",function(a){return function(b,d,e){c(this),this.__url=d;try{a.apply(this,[b,d,e])}catch(f){f.message.indexOf(\"Access is denied\")>-1&&(this.__origError=f,a.apply(this,[b,\"_fix_for_ie_crossdomain__\",e]))}}}),a(\"getResponseHeader\",function(a){return function(b){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(b):null==a?null:a.apply(this,[b])}}),a(\"getAllResponseHeaders\",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==a?null:a.apply(this)}}),a(\"abort\",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==a?null:a.apply(this)}}),a(\"setRequestHeader\",function(a){return function(b,d){if(\"__setXHR_\"===b){c(this);var e=d(this);e instanceof Function&&e(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[b]=d,a.apply(this,arguments)}}),a(\"send\",function(a){return function(){var c=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var d=arguments[0],e={url:c.__url,jsonp:!1,cache:!0,complete:function(a,d){a&&angular.isString(a)&&-1!==a.indexOf(\"#2174\")&&(a=null),c.__completed=!0,!a&&c.__listeners.load&&c.__listeners.load({type:\"load\",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),!a&&c.__listeners.loadend&&c.__listeners.loadend({type:\"loadend\",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),\"abort\"===a&&c.__listeners.abort&&c.__listeners.abort({type:\"abort\",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),void 0!==d.status&&b(c,\"status\",function(){return 0===d.status&&a&&\"abort\"!==a?500:d.status}),void 0!==d.statusText&&b(c,\"statusText\",function(){return d.statusText}),b(c,\"readyState\",function(){return 4}),void 0!==d.response&&b(c,\"response\",function(){return d.response});var e=d.responseText||(a&&0===d.status&&\"abort\"!==a?a:void 0);b(c,\"responseText\",function(){return e}),b(c,\"response\",function(){return e}),a&&b(c,\"err\",function(){return a}),c.__fileApiXHR=d,c.onreadystatechange&&c.onreadystatechange(),c.onload&&c.onload()},progress:function(a){if(a.target=c,c.__listeners.progress&&c.__listeners.progress(a),c.__total=a.total,c.__loaded=a.loaded,a.total===a.loaded){var b=this;setTimeout(function(){c.__completed||(c.getAllResponseHeaders=function(){},b.complete(null,{status:204,statusText:\"No Content\"}))},FileAPI.noContentTimeout||1e4)}},headers:c.__requestHeaders};e.data={},e.files={};for(var f=0;f<d.data.length;f++){var g=d.data[f];null!=g.val&&null!=g.val.name&&null!=g.val.size&&null!=g.val.type?e.files[g.key]=g.val:e.data[g.key]=g.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use \"FileAPI.hasFlash\"';c.__fileApiXHR=FileAPI.upload(e)},1)}else{if(this.__origError)throw this.__origError;a.apply(c,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(a,b,c){b.__isFileAPIBlobShim&&(b=b.data[0]),this.data.push({key:a,val:b,name:c})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(a){return{data:a,__isFileAPIBlobShim:!0}}}}(),function(){function a(a){return\"input\"===a[0].tagName.toLowerCase()&&a.attr(\"type\")&&\"file\"===a.attr(\"type\").toLowerCase()}function b(){try{var a=new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\");if(a)return!0}catch(b){if(void 0!==navigator.mimeTypes[\"application/x-shockwave-flash\"])return!0}return!1}function c(a){var b=0,c=0;if(window.jQuery)return jQuery(a).offset();if(a.offsetParent)do b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;while(a);return{left:b,top:c}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=b(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var d,e,f,g,h,i=document.createElement(\"script\"),j=document.getElementsByTagName(\"script\");if(window.FileAPI.jsUrl)d=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)e=window.FileAPI.jsPath;else for(f=0;f<j.length;f++)if(h=j[f].src,g=h.search(/\\/ng\\-file\\-upload[\\-a-zA-z0-9\\.]*\\.js/),g>-1){e=h.substring(0,g+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=e),i.setAttribute(\"src\",d||e+\"FileAPI.min.js\"),document.getElementsByTagName(\"head\")[0].appendChild(i)}FileAPI.ngfFixIE=function(d,e,f){if(!b())throw'Adode Flash Player need to be installed. To check ahead use \"FileAPI.hasFlash\"';var g=function(){d.attr(\"disabled\")?e&&e.removeClass(\"js-fileapi-wrapper\"):(e.attr(\"__ngf_flash_\")||(e.unbind(\"change\"),e.unbind(\"click\"),e.bind(\"change\",function(a){h.apply(this,[a]),f.apply(this,[a])}),e.attr(\"__ngf_flash_\",\"true\")),e.addClass(\"js-fileapi-wrapper\"),a(d)||e.css(\"position\",\"absolute\").css(\"top\",c(d[0]).top+\"px\").css(\"left\",c(d[0]).left+\"px\").css(\"width\",d[0].offsetWidth+\"px\").css(\"height\",d[0].offsetHeight+\"px\").css(\"filter\",\"alpha(opacity=0)\").css(\"display\",d.css(\"display\")).css(\"overflow\",\"hidden\").css(\"z-index\",\"900000\").css(\"visibility\",\"visible\"))};d.bind(\"mouseenter\",g);var h=function(a){for(var b=FileAPI.getFiles(a),c=0;c<b.length;c++)void 0===b[c].size&&(b[c].size=0),void 0===b[c].name&&(b[c].name=\"file\"),void 0===b[c].type&&(b[c].type=\"undefined\");a.target||(a.target={}),a.target.files=b,a.target.files!==b&&(a.__files_=b),(a.__files_||a.target.files).item=function(b){return(a.__files_||a.target.files)[b]||null}}},FileAPI.disableFileInput=function(a,b){b?a.removeClass(\"js-fileapi-wrapper\"):a.addClass(\"js-fileapi-wrapper\")}}}(),window.FileReader||(window.FileReader=function(){var a=this,b=!1;this.listeners={},this.addEventListener=function(b,c){a.listeners[b]=a.listeners[b]||[],a.listeners[b].push(c)},this.removeEventListener=function(b,c){a.listeners[b]&&a.listeners[b].splice(a.listeners[b].indexOf(c),1)},this.dispatchEvent=function(b){var c=a.listeners[b.type];if(c)for(var d=0;d<c.length;d++)c[d].call(a,b)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var c=function(b,c){var d={type:b,target:a,loaded:c.loaded,total:c.total,error:c.error};return null!=c.result&&(d.target.result=c.result),d},d=function(d){b||(b=!0,a.onloadstart&&a.onloadstart(c(\"loadstart\",d)));var e;\"load\"===d.type?(a.onloadend&&a.onloadend(c(\"loadend\",d)),e=c(\"load\",d),a.onload&&a.onload(e),a.dispatchEvent(e)):\"progress\"===d.type?(e=c(\"progress\",d),a.onprogress&&a.onprogress(e),a.dispatchEvent(e)):(e=c(\"error\",d),a.onerror&&a.onerror(e),a.dispatchEvent(e))};this.readAsArrayBuffer=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsBinaryString=function(a){FileAPI.readAsBinaryString(a,d)},this.readAsDataURL=function(a){FileAPI.readAsDataURL(a,d)},this.readAsText=function(a){FileAPI.readAsText(a,d)}});","/*! 9.0.9 */\n!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if(\"__setXHR_\"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module(\"ngFileUpload\",[]);ngFileUpload.version=\"9.0.9\",ngFileUpload.service(\"UploadBase\",[\"$http\",\"$q\",\"$timeout\",function(a,b,c){function d(d){function g(a){j.notify&&j.notify(a),k.progressFunc&&c(function(){k.progressFunc(a)})}function h(a){return null!=d._start&&f?{loaded:a.loaded+d._start,total:d._file.size,type:a.type,config:d,lengthComputable:!0,target:a.target}:a}function i(){a(d).then(function(a){f&&d._chunkSize&&!d._finished?(g({loaded:d._end,total:d._file.size,config:d,type:\"progress\"}),e.upload(d)):(d._finished&&delete d._finished,j.resolve(a))},function(a){j.reject(a)},function(a){j.notify(a)})}d.method=d.method||\"POST\",d.headers=d.headers||{};var j=d._deferred=d._deferred||b.defer(),k=j.promise;return d.disableProgress||(d.headers.__setXHR_=function(){return function(a){a&&a instanceof XMLHttpRequest&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener(\"progress\",function(a){a.config=d,g(h(a))},!1),a.upload.addEventListener(\"load\",function(a){a.lengthComputable&&(a.config=d,g(h(a)))},!1))}}),f?d._chunkSize&&d._end&&!d._finished?(d._start=d._end,d._end+=d._chunkSize,i()):d.resumeSizeUrl?a.get(d.resumeSizeUrl).then(function(a){d._start=d.resumeSizeResponseReader?d.resumeSizeResponseReader(a.data):parseInt((null==a.data.size?a.data:a.data.size).toString()),d._chunkSize&&(d._end=d._start+d._chunkSize),i()},function(a){throw a}):d.resumeSize?d.resumeSize().then(function(a){d._start=a,i()},function(a){throw a}):i():i(),k.success=function(a){return k.then(function(b){a(b.data,b.status,b.headers,d)}),k},k.error=function(a){return k.then(null,function(b){a(b.data,b.status,b.headers,d)}),k},k.progress=function(a){return k.progressFunc=a,k.then(null,null,function(b){a(b)}),k},k.abort=k.pause=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),k},k.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(k,arguments),a.apply(k,arguments)}}(d.xhrFn),k},k}var e=this;this.isResumeSupported=function(){return window.Blob&&Blob instanceof Function&&(new Blob).slice};var f=this.isResumeSupported();this.rename=function(a,b){return a.ngfName=b,a},this.jsonBlob=function(a){var b=new Blob([a],{type:\"application/json\"});return b._ngfBlob=!0,b},this.json=function(a){return angular.toJson(a)},this.upload=function(a){function b(a){return null!=a&&(a instanceof Blob||a.flashId&&a.name&&a.size)}function c(b,c){if(b._ngfBlob)return b;if(a._file=a._file||b,null!=a._start&&f){a._end&&a._end>=b.size&&(a._finished=!0,a._end=b.size);var d=b.slice(a._start,a._end||b.size);return d.name=b.name,d.ngfName=b.ngfName,a._chunkSize&&(c.append(\"_chunkSize\",a._end-a._start),c.append(\"_chunkNumber\",Math.floor(a._start/a._chunkSize)),c.append(\"_totalSize\",a._file.size)),d}return b}function g(d,e,f){if(void 0!==e)if(angular.isDate(e)&&(e=e.toISOString()),angular.isString(e))d.append(f,e);else if(b(e)){var h=c(e,d),i=f.split(\",\");i[1]&&(h.ngfName=i[1].replace(/^\\s+|\\s+$/g,\"\"),f=i[0]),a._fileKey=a._fileKey||f,d.append(f,h,h.ngfName||h.name)}else if(angular.isObject(e)){if(e.$$ngfCircularDetection)throw\"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: \"+f;e.$$ngfCircularDetection=!0;try{for(var j in e)if(e.hasOwnProperty(j)&&\"$$ngfCircularDetection\"!==j){var k=null==a.objectKey?\"[i]\":a.objectKey;e.length&&parseInt(j)>-1&&(k=null==a.arrayKey?k:a.arrayKey),g(d,e[j],f+k.replace(/[ik]/g,j))}}finally{delete e.$$ngfCircularDetection}}else d.append(f,e)}function h(){a._chunkSize=e.translateScalars(a.resumeChunkSize),a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null,a.headers=a.headers||{},a.headers[\"Content-Type\"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(b){var c,d=new FormData;b=b||a.fields||{},a.file&&(b.file=a.file);for(c in b)if(b.hasOwnProperty(c)){var e=b[c];a.formDataAppender?a.formDataAppender(d,c,e):g(d,e,c)}return d})}return a._isDigested||(a._isDigested=!0,h()),d(a)},this.http=function(b){return b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof Blob?b:a.defaults.transformRequest[0].apply(this,arguments)},b._chunkSize=e.translateScalars(b.resumeChunkSize),b._chunkSize=b._chunkSize?parseInt(b._chunkSize.toString()):null,d(b)},this.translateScalars=function(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1e3*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1e6*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1e9*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service(\"Upload\",[\"$parse\",\"$timeout\",\"$compile\",\"UploadResize\",function(a,b,c,d){function e(a,b,c,d){var e=g.attrGetter(\"ngfResize\",b,c);if(!e||!g.isResizeSupported())return d();for(var f=a.length,h=function(){f--,0===f&&d()},i=function(b){return function(c){a.splice(b,1,c),h()}},j=function(a){return function(b){h(),a.$error=\"resize\",a.$errorParam=(b?(b.message?b.message:b)+\": \":\"\")+(a&&a.name)}},k=0;k<a.length;k++){var l=a[k];0===l.type.indexOf(\"image\")?g.resize(l,e.width,e.height,e.quality).then(i(k),j(l)):h()}}function f(a,b,c,d){var e=[],f=g.attrGetter(\"ngfKeep\",c,d);if(f){var h=!1;if(\"distinct\"===f||g.attrGetter(\"ngfKeepDistinct\",c,d)===!0){var i=b.length;if(a)for(var j=0;j<a.length;j++){for(var k=0;i>k;k++)if(a[j].name===b[k].name){e.push(a[j]);break}k===i&&(b.push(a[j]),h=!0)}a=b}else a=b.concat(a||[])}return{files:a,dupFiles:e,keep:f}}var g=d;return g.getAttrWithDefaults=function(a,b){if(null!=a[b])return a[b];var c=g.defaults[b];return null==c?c:angular.isString(c)?c:JSON.stringify(c)},g.attrGetter=function(b,c,d,e){var f=this.getAttrWithDefaults(c,b);if(!d)return f;try{return e?a(f)(d,e):a(f)(d)}catch(g){if(b.search(/min|max|pattern/i))return f;throw g}},g.shouldUpdateOn=function(a,b,c){var d=g.attrGetter(\"ngModelOptions\",b,c);return d&&d.updateOn?d.updateOn.split(\" \").indexOf(a)>-1:!0},g.updateModel=function(c,d,h,i,j,k,l){function m(e,f,j,l,m){var n=e&&e.length?e[0]:null;c&&(g.applyModelValidation(c,e),c.$ngfModelChange=!0,c.$setViewValue(m?n:e)),i&&a(i)(h,{$files:e,$file:n,$newFiles:j,$duplicateFiles:l,$invalidFiles:f,$event:k});var o=g.attrGetter(\"ngfModelInvalid\",d);o&&b(function(){a(o).assign(h,f)}),b(function(){})}var n=j,o=(c&&c.$modelValue||d.$$ngfPrevFiles||[]).slice(0),p=f(j,o,d,h);j=p.files;var q=p.dupFiles,r=!g.attrGetter(\"ngfMultiple\",d,h)&&!g.attrGetter(\"multiple\",d)&&!p.keep;d.$$ngfPrevFiles=j,g.validate(n,c,d,h,function(){if(l)m(j,[],n,q,r);else{var a=g.attrGetter(\"ngModelOptions\",d,h);if(!a||!a.allowInvalid){var c=[],f=[];angular.forEach(j,function(a){a.$error?f.push(a):c.push(a)}),j=c}e(j,d,h,function(){b(function(){m(j,f,n,q,r)},a&&a.debounce?a.debounce.change||a.debounce:0)})}});for(var s=o.length;s--;){var t=o[s];window.URL&&t.blobUrl&&(URL.revokeObjectURL(t.blobUrl),delete t.blobUrl)}},g}]),ngFileUpload.directive(\"ngfSelect\",[\"$parse\",\"$timeout\",\"$compile\",\"Upload\",function(a,b,c,d){function e(a){var b=a.match(/Android[^\\d]*(\\d+)\\.(\\d+)/);if(b&&b.length>2){var c=d.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf(\"Chrome\")&&/.*Windows.*Safari.*/.test(a)}function f(a,b,c,d,f,h,i,j){function k(){return\"input\"===b[0].tagName.toLowerCase()&&c.type&&\"file\"===c.type.toLowerCase()}function l(){return t(\"ngfChange\")||t(\"ngfSelect\")}function m(b){if(j.shouldUpdateOn(\"change\",c,a)){for(var e=b.__files_||b.target&&b.target.files,f=[],g=0;g<e.length;g++)f.push(e[g]);j.updateModel(d,c,a,l(),f.length?f:null,b)}}function n(a){if(b!==a)for(var c=0;c<b[0].attributes.length;c++){var d=b[0].attributes[c];\"type\"!==d.name&&\"class\"!==d.name&&\"id\"!==d.name&&\"style\"!==d.name&&((null==d.value||\"\"===d.value)&&(\"required\"===d.name&&(d.value=\"required\"),\"multiple\"===d.name&&(d.value=\"multiple\")),a.attr(d.name,d.value))}}function o(){if(k())return b;var a=angular.element('<input type=\"file\">');return n(a),a.css(\"visibility\",\"hidden\").css(\"position\",\"absolute\").css(\"overflow\",\"hidden\").css(\"width\",\"0px\").css(\"height\",\"0px\").css(\"border\",\"none\").css(\"margin\",\"0px\").css(\"padding\",\"0px\").attr(\"tabindex\",\"-1\"),g.push({el:b,ref:a}),document.body.appendChild(a[0]),a}function p(c){if(b.attr(\"disabled\")||t(\"ngfSelectDisabled\",a))return!1;var d=q(c);return null!=d?d:(r(c),e(navigator.userAgent)?setTimeout(function(){w[0].click()},0):w[0].click(),!1)}function q(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if(\"touchstart\"===a.type)return v=b?b[0].clientY:0,!0;if(a.stopPropagation(),a.preventDefault(),\"touchend\"===a.type){var c=b?b[0].clientY:0;if(Math.abs(c-v)>20)return!1}}function r(b){j.shouldUpdateOn(\"click\",c,a)&&w.val()&&(w.val(null),j.updateModel(d,c,a,l(),null,b,!0))}function s(a){if(w&&!w.attr(\"__ngf_ie10_Fix_\")){if(!w[0].parentNode)return void(w=null);a.preventDefault(),a.stopPropagation(),w.unbind(\"click\");var b=w.clone();return w.replaceWith(b),w=b,w.attr(\"__ngf_ie10_Fix_\",\"true\"),w.bind(\"change\",m),w.bind(\"click\",s),w[0].click(),!1}w.removeAttr(\"__ngf_ie10_Fix_\")}var t=function(a,b){return j.attrGetter(a,c,b)};j.registerModelChangeValidator(d,c,a);var u=[];u.push(a.$watch(t(\"ngfMultiple\"),function(){w.attr(\"multiple\",t(\"ngfMultiple\",a))})),u.push(a.$watch(t(\"ngfCapture\"),function(){w.attr(\"capture\",t(\"ngfCapture\",a))})),c.$observe(\"accept\",function(){w.attr(\"accept\",t(\"accept\"))}),u.push(function(){c.$$observers&&delete c.$$observers.accept});var v=0,w=b;k()||(w=o()),w.bind(\"change\",m),k()?b.bind(\"click\",r):b.bind(\"click touchstart touchend\",p),-1!==navigator.appVersion.indexOf(\"MSIE 10\")&&w.bind(\"click\",s),d&&d.$formatters.push(function(a){return(null==a||0===a.length)&&w.val()&&w.val(null),a}),a.$on(\"$destroy\",function(){k()||w.remove(),angular.forEach(u,function(a){a()})}),h(function(){for(var a=0;a<g.length;a++){var b=g[a];document.body.contains(b.el[0])||(g.splice(a,1),b.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(b,w,m)}var g=[];return{restrict:\"AEC\",require:\"?ngModel\",link:function(e,g,h,i){f(e,g,h,i,a,b,c,d)}}}]),function(){function a(a){return\"img\"===a.tagName.toLowerCase()?\"image\":\"audio\"===a.tagName.toLowerCase()?\"audio\":\"video\"===a.tagName.toLowerCase()?\"video\":/./}function b(b,c,d,e,f,g,h,i){function j(a){var g=b.attrGetter(\"ngfNoObjectUrl\",f,d);b.dataUrl(a,g)[\"finally\"](function(){c(function(){var b=(g?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;i?e.css(\"background-image\",\"url('\"+(b||\"\")+\"')\"):e.attr(\"src\",b),b?e.removeClass(\"ngf-hide\"):e.addClass(\"ngf-hide\")})})}c(function(){var c=d.$watch(f[g],function(c){var d=h;if(\"ngfThumbnail\"===g&&(d||(d={width:e[0].clientWidth,height:e[0].clientHeight}),0===d.width&&window.getComputedStyle)){var f=getComputedStyle(e[0]);d={width:parseInt(f.width.slice(0,-2)),height:parseInt(f.height.slice(0,-2))}}return angular.isString(c)?(e.removeClass(\"ngf-hide\"),i?e.css(\"background-image\",\"url('\"+c+\"')\"):e.attr(\"src\",c)):void(!c||!c.type||0!==c.type.search(a(e[0]))||i&&0!==c.type.indexOf(\"image\")?e.addClass(\"ngf-hide\"):d&&b.isResizeSupported()?b.resize(c,d.width,d.height,d.quality).then(function(a){j(a)},function(a){throw a}):j(c))});d.$on(\"$destroy\",function(){c()})})}ngFileUpload.service(\"UploadDataUrl\",[\"UploadBase\",\"$timeout\",\"$q\",function(a,b,c){var d=a;return d.base64DataUrl=function(a){if(angular.isArray(a)){var b=c.defer(),e=0;return angular.forEach(a,function(c){d.dataUrl(c,!0)[\"finally\"](function(){if(e++,e===a.length){var c=[];angular.forEach(a,function(a){c.push(a.$ngfDataUrl)}),b.resolve(c,a)}})}),b.promise}return d.dataUrl(a,!0)},d.dataUrl=function(a,d){if(d&&null!=a.$ngfDataUrl||!d&&null!=a.$ngfBlobUrl){var e=c.defer();return b(function(){e.resolve(d?a.$ngfDataUrl:a.$ngfBlobUrl,a)}),e.promise}var f=d?a.$$ngfDataUrlPromise:a.$$ngfBlobUrlPromise;if(f)return f;var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf(\"MSIE 8\")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf(\"MSIE 9\")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!d){var e;try{e=c.createObjectURL(a)}catch(f){return void b(function(){a.$ngfBlobUrl=\"\",g.reject()})}b(function(){a.$ngfBlobUrl=e,e&&g.resolve(e,a)})}else{var h=new FileReader;h.onload=function(c){b(function(){a.$ngfDataUrl=c.target.result,g.resolve(c.target.result,a)})},h.onerror=function(){b(function(){a.$ngfDataUrl=\"\",g.reject()})},h.readAsDataURL(a)}}else b(function(){a[d?\"dataUrl\":\"blobUrl\"]=\"\",g.reject()})}),f=d?a.$$ngfDataUrlPromise=g.promise:a.$$ngfBlobUrlPromise=g.promise,f[\"finally\"](function(){delete a[d?\"$$ngfDataUrlPromise\":\"$$ngfBlobUrlPromise\"]}),f},d}]);var c=angular.element(\"<style>.ngf-hide{display:none !important}</style>\");document.getElementsByTagName(\"head\")[0].appendChild(c[0]),ngFileUpload.directive(\"ngfSrc\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){b(a,c,d,e,f,\"ngfSrc\",a.attrGetter(\"ngfResize\",f,d),!1)}}}]),ngFileUpload.directive(\"ngfBackground\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){b(a,c,d,e,f,\"ngfBackground\",a.attrGetter(\"ngfResize\",f,d),!0)}}}]),ngFileUpload.directive(\"ngfThumbnail\",[\"Upload\",\"$timeout\",function(a,c){return{restrict:\"AE\",link:function(d,e,f){var g=a.attrGetter(\"ngfSize\",f,d);b(a,c,d,e,f,\"ngfThumbnail\",g,a.attrGetter(\"ngfAsBackground\",f,d))}}}]),ngFileUpload.config([\"$compileProvider\",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),ngFileUpload.filter(\"ngfDataUrl\",[\"UploadDataUrl\",\"$sce\",function(a,b){return function(c,d,e){if(angular.isString(c))return b.trustAsResourceUrl(c);var f=c&&((d?c.$ngfDataUrl:c.$ngfBlobUrl)||c.$ngfDataUrl);return c&&!f?(!c.$ngfDataUrlFilterInProgress&&angular.isObject(c)&&(c.$ngfDataUrlFilterInProgress=!0,a.dataUrl(c,d)),\"\"):(c&&delete c.$ngfDataUrlFilterInProgress,(c&&f?e?b.trustAsResourceUrl(f):f:c)||\"\")}}])}(),ngFileUpload.service(\"UploadValidate\",[\"UploadDataUrl\",\"$q\",\"$timeout\",function(a,b,c){function d(a){var b=\"\",c=[];if(a.length>2&&\"/\"===a[0]&&\"/\"===a[a.length-1])b=a.substring(1,a.length-1);else{var e=a.split(\",\");if(e.length>1)for(var f=0;f<e.length;f++){var g=d(e[f]);g.regexp?(b+=\"(\"+g.regexp+\")\",f<e.length-1&&(b+=\"|\")):c=c.concat(g.excludes)}else 0===a.indexOf(\"!\")?c.push(\"^((?!\"+d(a.substring(1)).regexp+\").)*$\"):(0===a.indexOf(\".\")&&(a=\"*\"+a),b=\"^\"+a.replace(new RegExp(\"[.\\\\\\\\+*?\\\\[\\\\^\\\\]$(){}=!<>|:\\\\-]\",\"g\"),\"\\\\$&\")+\"$\",b=b.replace(/\\\\\\*/g,\".*\").replace(/\\\\\\?/g,\".\"))}return{regexp:b,excludes:c}}function e(a,b){null==b||a.$dirty||(a.$setDirty?a.$setDirty():a.$dirty=!0)}var f=a;return f.validatePattern=function(a,b){if(!b)return!0;var c=d(b),e=!0;if(c.regexp&&c.regexp.length){var f=new RegExp(c.regexp,\"i\");e=null!=a.type&&f.test(a.type)||null!=a.name&&f.test(a.name)}for(var g=c.excludes.length;g--;){var h=new RegExp(c.excludes[g],\"i\");e=e&&(null==a.type||h.test(a.type))&&(null==a.name||h.test(a.name))}return e},f.registerModelChangeValidator=function(a,b,c){a&&a.$formatters.push(function(d){a.$ngfModelChange?a.$ngfModelChange=!1:f.validate(d,a,b,c,function(){f.applyModelValidation(a,d)})})},f.applyModelValidation=function(a,b){e(a,b),angular.forEach(a.$ngfValidations,function(b){a.$setValidity(b.name,b.valid)})},f.validate=function(a,b,c,d,e){function g(c,d,e){if(a){for(var f=\"ngf\"+c[0].toUpperCase()+c.substr(1),g=a.length,h=null;g--;){var j=a[g],k=i(f,{$file:j});null==k&&(k=d(i(\"ngfValidate\")||{}),h=null==h?!0:h),null!=k&&(e(j,k)||(j.$error=c,j.$errorParam=k,a.splice(g,1),h=!1))}null!==h&&b.$ngfValidations.push({name:c,valid:h})}}function h(c,d,f,g,h){if(a){var k=0,l=!1,m=\"ngf\"+c[0].toUpperCase()+c.substr(1);a=void 0===a.length?[a]:a,angular.forEach(a,function(a){if(0!==a.type.search(f))return!0;var n=i(m,{$file:a})||d(i(\"ngfValidate\",{$file:a})||{});n&&(j++,k++,g(a,n).then(function(b){h(b,n)||(a.$error=c,a.$errorParam=n,l=!0)},function(){i(\"ngfValidateForce\",{$file:a})&&(a.$error=c,a.$errorParam=n,l=!0)})[\"finally\"](function(){j--,k--,k||b.$ngfValidations.push({name:c,valid:!l}),j||e.call(b,b.$ngfValidations)}))})}}b=b||{},b.$ngfValidations=b.$ngfValidations||[],angular.forEach(b.$ngfValidations,function(a){a.valid=!0});var i=function(a,b){return f.attrGetter(a,c,d,b)};if(null==a||0===a.length)return void e.call(b);if(a=void 0===a.length?[a]:a.slice(0),g(\"pattern\",function(a){return a.pattern},f.validatePattern),g(\"minSize\",function(a){return a.size&&a.size.min},function(a,b){return a.size>=f.translateScalars(b)}),g(\"maxSize\",function(a){return a.size&&a.size.max},function(a,b){return a.size<=f.translateScalars(b)}),g(\"validateFn\",function(){return null},function(a,b){return b===!0||null===b||\"\"===b}),!a.length)return void e.call(b,b.$ngfValidations);var j=0;h(\"maxHeight\",function(a){return a.height&&a.height.max},/image/,this.imageDimensions,function(a,b){return a.height<=b}),h(\"minHeight\",function(a){return a.height&&a.height.min},/image/,this.imageDimensions,function(a,b){return a.height>=b}),h(\"maxWidth\",function(a){return a.width&&a.width.max},/image/,this.imageDimensions,function(a,b){return a.width<=b}),h(\"minWidth\",function(a){return a.width&&a.width.min},/image/,this.imageDimensions,function(a,b){return a.width>=b}),h(\"ratio\",function(a){return a.ratio},/image/,this.imageDimensions,function(a,b){for(var c=b.toString().split(\",\"),d=!1,e=0;e<c.length;e++){var f=c[e],g=f.search(/x/i);f=g>-1?parseFloat(f.substring(0,g))/parseFloat(f.substring(g+1)):parseFloat(f),Math.abs(a.width/a.height-f)<1e-4&&(d=!0)}return d}),h(\"maxDuration\",function(a){return a.duration&&a.duration.max},/audio|video/,this.mediaDuration,function(a,b){return a<=f.translateScalars(b)}),h(\"minDuration\",function(a){return a.duration&&a.duration.min},/audio|video/,this.mediaDuration,function(a,b){return a>=f.translateScalars(b)}),h(\"validateAsyncFn\",function(){return null},/./,function(a,b){return b},function(a){return a===!0||null===a||\"\"===a}),j||e.call(b,b.$ngfValidations)},f.imageDimensions=function(a){if(a.$ngfWidth&&a.$ngfHeight){var d=b.defer();return c(function(){d.resolve({width:a.$ngfWidth,height:a.$ngfHeight})}),d.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf(\"image\")?void e.reject(\"not image\"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].clientWidth,c=h[0].clientHeight;h.remove(),a.$ngfWidth=b,a.$ngfHeight=c,e.resolve({width:b,height:c})}function f(){h.remove(),e.reject(\"load error\")}function g(){c(function(){h[0].parentNode&&(h[0].clientWidth?d():i>10?f():g())},1e3)}var h=angular.element(\"<img>\").attr(\"src\",b).css(\"visibility\",\"hidden\").css(\"position\",\"fixed\");h.on(\"load\",d),h.on(\"error\",f);var i=0;g(),angular.element(document.getElementsByTagName(\"body\")[0]).append(h)},function(){e.reject(\"load error\")})}),a.$ngfDimensionPromise=e.promise,a.$ngfDimensionPromise[\"finally\"](function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},f.mediaDuration=function(a){if(a.$ngfDuration){var d=b.defer();return c(function(){d.resolve(a.$ngfDuration)}),d.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf(\"audio\")&&0!==a.type.indexOf(\"video\")?void e.reject(\"not media\"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].duration;a.$ngfDuration=b,h.remove(),e.resolve(b)}function f(){h.remove(),e.reject(\"load error\")}function g(){c(function(){h[0].parentNode&&(h[0].duration?d():i>10?f():g())},1e3)}var h=angular.element(0===a.type.indexOf(\"audio\")?\"<audio>\":\"<video>\").attr(\"src\",b).css(\"visibility\",\"none\").css(\"position\",\"fixed\");h.on(\"loadedmetadata\",d),h.on(\"error\",f);var i=0;g(),angular.element(document.body).append(h)},function(){e.reject(\"load error\")})}),a.$ngfDurationPromise=e.promise,a.$ngfDurationPromise[\"finally\"](function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},f}]),ngFileUpload.service(\"UploadResize\",[\"UploadValidate\",\"$q\",\"$timeout\",function(a,b,c){var d=a,e=function(a,b,c,d){var e=Math.min(c/a,d/b);return{width:a*e,height:b*e}},f=function(a,c,d,f,g){var h=b.defer(),i=document.createElement(\"canvas\"),j=document.createElement(\"img\");return j.onload=function(){try{0===c&&(c=j.width,d=j.height);var a=e(j.width,j.height,c,d);i.width=a.width,i.height=a.height;var b=i.getContext(\"2d\");b.drawImage(j,0,0,a.width,a.height),h.resolve(i.toDataURL(g||\"image/WebP\",f||1))}catch(k){h.reject(k)}},j.onerror=function(){h.reject()},j.src=a,h.promise};return d.dataUrltoBlob=function(a){for(var b=a.split(\",\"),c=b[0].match(/:(.*?);/)[1],d=atob(b[1]),e=d.length,f=new Uint8Array(e);e--;)f[e]=d.charCodeAt(e);return new Blob([f],{type:c})},d.isResizeSupported=function(){var a=document.createElement(\"canvas\");return window.atob&&a.getContext&&a.getContext(\"2d\")},d.resize=function(a,e,g,h){var i=b.defer();return 0!==a.type.indexOf(\"image\")?(c(function(){i.resolve(\"Only images are allowed for resizing!\")}),i.promise):(d.dataUrl(a,!0).then(function(b){f(b,e,g,h,a.type).then(function(b){var c=d.dataUrltoBlob(b);c.name=a.name,i.resolve(c)},function(){i.reject()})},function(){i.reject()}),i.promise)},d}]),function(){function a(a,c,d,e,f,g,h,i,j){function k(){return c.attr(\"disabled\")||o(\"ngfDropDisabled\",a)}function l(a,b,c,d){var e=o(\"ngfDragOverClass\",a,{$event:c}),f=\"dragover\";if(angular.isString(e))f=e;else if(e&&(e.delay&&(s=e.delay),e.accept||e.reject)){var g=c.dataTransfer.items;if(null!=g&&g.length)for(var h=e.pattern||o(\"ngfPattern\",a,{$event:c}),j=g.length;j--;){if(!i.validatePattern(g[j],h)){f=e.reject;break}f=e.accept}else f=e.accept}d(f)}function m(a,b,c,d){function e(a,b,c){if(null!=b)if(b.isDirectory){var d=(c||\"\")+b.name;a.push({name:b.name,type:\"directory\",path:d});var f=b.createReader(),g=[];i++;var h=function(){f.readEntries(function(d){try{if(d.length)g=g.concat(Array.prototype.slice.call(d||[],0)),h();else{for(var f=0;f<g.length;f++)e(a,g[f],(c?c:\"\")+b.name+\"/\");i--}}catch(j){i--,console.error(j)}},function(){i--})};h()}else i++,b.file(function(b){try{i--,b.path=(c?c:\"\")+b.name,a.push(b)}catch(d){i--,console.error(d)}},function(){i--})}var f=[],i=0,j=a.dataTransfer.items;if(j&&j.length>0&&\"file\"!==h.protocol())for(var k=0;k<j.length;k++){if(j[k].webkitGetAsEntry&&j[k].webkitGetAsEntry()&&j[k].webkitGetAsEntry().isDirectory){var l=j[k].webkitGetAsEntry();if(l.isDirectory&&!c)continue;null!=l&&e(f,l)}else{var m=j[k].getAsFile();null!=m&&f.push(m)}if(!d&&f.length>0)break}else{var n=a.dataTransfer.files;if(null!=n)for(var o=0;o<n.length&&(f.push(n.item(o)),d||!(f.length>0));o++);}var p=0;!function q(a){g(function(){if(i)10*p++<2e4&&q(10);else{if(!d&&f.length>1){for(k=0;\"directory\"===f[k].type;)k++;f=[f[k]]}b(f)}},a||0)}()}var n=b(),o=function(a,b,c){return i.attrGetter(a,d,b,c)};if(o(\"dropAvailable\")&&g(function(){a[o(\"dropAvailable\")]?a[o(\"dropAvailable\")].value=n:a[o(\"dropAvailable\")]=n}),!n)return void(o(\"ngfHideOnDropNotAvailable\",a)===!0&&c.css(\"display\",\"none\"));null==o(\"ngfSelect\")&&i.registerModelChangeValidator(e,d,a);var p,q=null,r=f(o(\"ngfStopPropagation\")),s=1;c[0].addEventListener(\"dragover\",function(b){if(!k()){if(b.preventDefault(),r(a)&&b.stopPropagation(),navigator.userAgent.indexOf(\"Chrome\")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect=\"move\"===e||\"linkMove\"===e?\"move\":\"copy\"}g.cancel(q),p||(p=\"C\",l(a,d,b,function(d){p=d,c.addClass(p),o(\"ngfDrag\",a,{$isDragging:!0,$class:p,$event:b})}))}},!1),c[0].addEventListener(\"dragenter\",function(b){k()||(b.preventDefault(),r(a)&&b.stopPropagation())},!1),c[0].addEventListener(\"dragleave\",function(b){k()||(b.preventDefault(),r(a)&&b.stopPropagation(),q=g(function(){p&&c.removeClass(p),p=null,o(\"ngfDrag\",a,{$isDragging:!1,$event:b})},s||100))},!1),c[0].addEventListener(\"drop\",function(b){if(!k()&&i.shouldUpdateOn(\"drop\",d,a)){b.preventDefault(),r(a)&&b.stopPropagation(),p&&c.removeClass(p),p=null;var f;try{f=b.dataTransfer&&b.dataTransfer.getData&&b.dataTransfer.getData(\"text/html\")}catch(g){}if(f){var h;f.replace(/<img .*src *=\\\"([^\\\"]*)\\\"/,function(a,b){h=b}),h&&j({url:h,method:\"get\",responseType:\"arraybuffer\"}).then(function(c){var f=new Uint8Array(c.data),g=c.headers(\"content-type\")||\"image/jpg\",h=new Blob([f],{type:g});i.updateModel(e,d,a,o(\"ngfChange\")||o(\"ngfDrop\"),[h],b)})}else m(b,function(c){i.updateModel(e,d,a,o(\"ngfChange\")||o(\"ngfDrop\"),c,b)},o(\"ngfAllowDir\",a)!==!1,o(\"multiple\")||o(\"ngfMultiple\",a))}},!1),c[0].addEventListener(\"paste\",function(b){if(!k()&&i.shouldUpdateOn(\"paste\",d,a)){var c=[],f=b.clipboardData||b.originalEvent.clipboardData;if(f&&f.items){for(var g=0;g<f.items.length;g++)-1!==f.items[g].type.indexOf(\"image\")&&c.push(f.items[g].getAsFile());i.updateModel(e,d,a,o(\"ngfChange\")||o(\"ngfDrop\"),c,b)}}},!1)}function b(){var a=document.createElement(\"div\");return\"draggable\"in a&&\"ondrop\"in a&&!/Edge\\/12./i.test(navigator.userAgent)}ngFileUpload.directive(\"ngfDrop\",[\"$parse\",\"$timeout\",\"$location\",\"Upload\",\"$http\",function(b,c,d,e,f){return{restrict:\"AEC\",require:\"?ngModel\",link:function(g,h,i,j){a(g,h,i,j,b,c,d,e,f)}}}]),ngFileUpload.directive(\"ngfNoFileDrop\",function(){return function(a,c){b()&&c.css(\"display\",\"none\")}}),ngFileUpload.directive(\"ngfDropAvailable\",[\"$parse\",\"$timeout\",\"Upload\",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter(\"ngfDropAvailable\",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}();","/**\n* please-wait\n* Display a nice loading screen while your app loads\n\n* @author Pathgather <tech@pathgather.com>\n* @copyright Pathgather 2015\n* @license MIT <http://opensource.org/licenses/mit-license.php>\n* @link https://github.com/Pathgather/please-wait\n* @module please-wait\n* @version 0.0.5\n*/\n!function(a,b){\"object\"==typeof exports?b(exports):\"function\"==typeof define&&define.amd?define([\"exports\"],b):b(a)}(this,function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;g=document.createElement(\"fakeelement\"),e=!1,n=!1,d=\"animationend\",m=null,f=\"Webkit Moz O ms\".split(\" \"),l={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd\",msTransition:\"MSTransitionEnd\",transition:\"transitionend\"};for(h in l)if(o=l[h],null!=g.style[h]){m=o,n=!0;break}if(null!=g.style.animationName&&(e=!0),!e)for(p=0,q=f.length;q>p;p++)if(i=f[p],null!=g.style[\"\"+i+\"AnimationName\"]){switch(i){case\"Webkit\":d=\"webkitAnimationEnd\";break;case\"Moz\":d=\"animationend\";break;case\"O\":d=\"oanimationend\";break;case\"ms\":d=\"MSAnimationEnd\"}e=!0;break}return c=function(a,b){return b.classList?b.classList.add(a):b.className+=\" \"+a},k=function(a,b){return b.classList?b.classList.remove(a):b.className=b.className.replace(a,\"\").trim()},b=function(){function a(a){var b,f,g,h;b=this.constructor._defaultOptions,this.options={},this.loaded=!1,this.finishing=!1;for(f in b)h=b[f],this.options[f]=null!=a[f]?a[f]:h;this._loadingElem=document.createElement(\"div\"),this._loadingHtmlToDisplay=[],this._loadingElem.className=\"pg-loading-screen\",null!=this.options.backgroundColor&&(this._loadingElem.style.backgroundColor=this.options.backgroundColor),this._loadingElem.innerHTML=this.options.template,this._loadingHtmlElem=this._loadingElem.getElementsByClassName(\"pg-loading-html\")[0],null!=this._loadingHtmlElem&&(this._loadingHtmlElem.innerHTML=this.options.loadingHtml),this._readyToShowLoadingHtml=!1,this._logoElem=this._loadingElem.getElementsByClassName(\"pg-loading-logo\")[0],null!=this._logoElem&&(this._logoElem.src=this.options.logo),k(\"pg-loaded\",document.body),c(\"pg-loading\",document.body),document.body.appendChild(this._loadingElem),c(\"pg-loading\",this._loadingElem),this._onLoadedCallback=this.options.onLoadedCallback,g=function(a){return function(b){return a.loaded=!0,a._readyToShowLoadingHtml=!0,c(\"pg-loaded\",a._loadingHtmlElem),e&&a._loadingHtmlElem.removeEventListener(d,g),a._loadingHtmlToDisplay.length>0&&a._changeLoadingHtml(),a.finishing?(null!=b&&b.stopPropagation(),a._finish()):void 0}}(this),null!=this._loadingHtmlElem&&(e?this._loadingHtmlElem.addEventListener(d,g):g(),this._loadingHtmlListener=function(a){return function(){return a._readyToShowLoadingHtml=!0,k(\"pg-loading\",a._loadingHtmlElem),n&&a._loadingHtmlElem.removeEventListener(m,a._loadingHtmlListener),a._loadingHtmlToDisplay.length>0?a._changeLoadingHtml():void 0}}(this),this._removingHtmlListener=function(a){return function(){return a._loadingHtmlElem.innerHTML=a._loadingHtmlToDisplay.shift(),k(\"pg-removing\",a._loadingHtmlElem),c(\"pg-loading\",a._loadingHtmlElem),n?(a._loadingHtmlElem.removeEventListener(m,a._removingHtmlListener),a._loadingHtmlElem.addEventListener(m,a._loadingHtmlListener)):a._loadingHtmlListener()}}(this))}return a._defaultOptions={backgroundColor:null,logo:null,loadingHtml:null,template:\"<div class='pg-loading-inner'>\\n  <div class='pg-loading-center-outer'>\\n    <div class='pg-loading-center-middle'>\\n      <h1 class='pg-loading-logo-header'>\\n        <img class='pg-loading-logo'></img>\\n      </h1>\\n      <div class='pg-loading-html'>\\n      </div>\\n    </div>\\n  </div>\\n</div>\",onLoadedCallback:null},a.prototype.finish=function(a,b){return null==a&&(a=!1),window.document.hidden&&(a=!0),this.finishing=!0,null!=b&&this.updateOption(\"onLoadedCallback\",b),this.loaded||a?this._finish(a):void 0},a.prototype.updateOption=function(a,b){switch(a){case\"backgroundColor\":return this._loadingElem.style.backgroundColor=b;case\"logo\":return this._logoElem.src=b;case\"loadingHtml\":return this.updateLoadingHtml(b);case\"onLoadedCallback\":return this._onLoadedCallback=b;default:throw new Error(\"Unknown option '\"+a+\"'\")}},a.prototype.updateOptions=function(a){var b,c,d;null==a&&(a={}),d=[];for(b in a)c=a[b],d.push(this.updateOption(b,c));return d},a.prototype.updateLoadingHtml=function(a,b){if(null==b&&(b=!1),null==this._loadingHtmlElem)throw new Error(\"The loading template does not have an element of class 'pg-loading-html'\");return b?(this._loadingHtmlToDisplay=[a],this._readyToShowLoadingHtml=!0):this._loadingHtmlToDisplay.push(a),this._readyToShowLoadingHtml?this._changeLoadingHtml():void 0},a.prototype._changeLoadingHtml=function(){return this._readyToShowLoadingHtml=!1,this._loadingHtmlElem.removeEventListener(m,this._loadingHtmlListener),this._loadingHtmlElem.removeEventListener(m,this._removingHtmlListener),k(\"pg-loading\",this._loadingHtmlElem),k(\"pg-removing\",this._loadingHtmlElem),n?(c(\"pg-removing\",this._loadingHtmlElem),this._loadingHtmlElem.addEventListener(m,this._removingHtmlListener)):this._removingHtmlListener()},a.prototype._finish=function(a){var b;return null==a&&(a=!1),null!=this._loadingElem?(c(\"pg-loaded\",document.body),\"function\"==typeof this._onLoadedCallback&&this._onLoadedCallback.apply(this),b=function(a){return function(){return document.body.removeChild(a._loadingElem),k(\"pg-loading\",document.body),e&&a._loadingElem.removeEventListener(d,b),a._loadingElem=null}}(this),!a&&e?(c(\"pg-loaded\",this._loadingElem),this._loadingElem.addEventListener(d,b)):b()):void 0},a}(),j=function(a){return null==a&&(a={}),new b(a)},a.pleaseWait=j,j});","/*! selectize.js - v0.12.1 | https://github.com/brianreavis/selectize.js | Apache License (v2) */\n!function(a,b){\"function\"==typeof define&&define.amd?define(\"sifter\",b):\"object\"==typeof exports?module.exports=b():a.Sifter=b()}(this,function(){var a=function(a,b){this.items=a,this.settings=b||{diacritics:!0}};a.prototype.tokenize=function(a){if(a=d(String(a||\"\").toLowerCase()),!a||!a.length)return[];var b,c,f,h,i=[],j=a.split(/ +/);for(b=0,c=j.length;c>b;b++){if(f=e(j[b]),this.settings.diacritics)for(h in g)g.hasOwnProperty(h)&&(f=f.replace(new RegExp(h,\"g\"),g[h]));i.push({string:j[b],regex:new RegExp(f,\"i\")})}return i},a.prototype.iterator=function(a,b){var c;c=f(a)?Array.prototype.forEach||function(a){for(var b=0,c=this.length;c>b;b++)a(this[b],b,this)}:function(a){for(var b in this)this.hasOwnProperty(b)&&a(this[b],b,this)},c.apply(a,[b])},a.prototype.getScoreFunction=function(a,b){var c,d,e,f;c=this,a=c.prepareSearch(a,b),e=a.tokens,d=a.options.fields,f=e.length;var g=function(a,b){var c,d;return a?(a=String(a||\"\"),d=a.search(b.regex),-1===d?0:(c=b.string.length/a.length,0===d&&(c+=.5),c)):0},h=function(){var a=d.length;return a?1===a?function(a,b){return g(b[d[0]],a)}:function(b,c){for(var e=0,f=0;a>e;e++)f+=g(c[d[e]],b);return f/a}:function(){return 0}}();return f?1===f?function(a){return h(e[0],a)}:\"and\"===a.options.conjunction?function(a){for(var b,c=0,d=0;f>c;c++){if(b=h(e[c],a),0>=b)return 0;d+=b}return d/f}:function(a){for(var b=0,c=0;f>b;b++)c+=h(e[b],a);return c/f}:function(){return 0}},a.prototype.getSortFunction=function(a,c){var d,e,f,g,h,i,j,k,l,m,n;if(f=this,a=f.prepareSearch(a,c),n=!a.query&&c.sort_empty||c.sort,l=function(a,b){return\"$score\"===a?b.score:f.items[b.id][a]},h=[],n)for(d=0,e=n.length;e>d;d++)(a.query||\"$score\"!==n[d].field)&&h.push(n[d]);if(a.query){for(m=!0,d=0,e=h.length;e>d;d++)if(\"$score\"===h[d].field){m=!1;break}m&&h.unshift({field:\"$score\",direction:\"desc\"})}else for(d=0,e=h.length;e>d;d++)if(\"$score\"===h[d].field){h.splice(d,1);break}for(k=[],d=0,e=h.length;e>d;d++)k.push(\"desc\"===h[d].direction?-1:1);return i=h.length,i?1===i?(g=h[0].field,j=k[0],function(a,c){return j*b(l(g,a),l(g,c))}):function(a,c){var d,e,f;for(d=0;i>d;d++)if(f=h[d].field,e=k[d]*b(l(f,a),l(f,c)))return e;return 0}:null},a.prototype.prepareSearch=function(a,b){if(\"object\"==typeof a)return a;b=c({},b);var d=b.fields,e=b.sort,g=b.sort_empty;return d&&!f(d)&&(b.fields=[d]),e&&!f(e)&&(b.sort=[e]),g&&!f(g)&&(b.sort_empty=[g]),{options:b,query:String(a||\"\").toLowerCase(),tokens:this.tokenize(a),total:0,items:[]}},a.prototype.search=function(a,b){var c,d,e,f,g=this;return d=this.prepareSearch(a,b),b=d.options,a=d.query,f=b.score||g.getScoreFunction(d),a.length?g.iterator(g.items,function(a,e){c=f(a),(b.filter===!1||c>0)&&d.items.push({score:c,id:e})}):g.iterator(g.items,function(a,b){d.items.push({score:1,id:b})}),e=g.getSortFunction(d,b),e&&d.items.sort(e),d.total=d.items.length,\"number\"==typeof b.limit&&(d.items=d.items.slice(0,b.limit)),d};var b=function(a,b){return\"number\"==typeof a&&\"number\"==typeof b?a>b?1:b>a?-1:0:(a=h(String(a||\"\")),b=h(String(b||\"\")),a>b?1:b>a?-1:0)},c=function(a){var b,c,d,e;for(b=1,c=arguments.length;c>b;b++)if(e=arguments[b])for(d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);return a},d=function(a){return(a+\"\").replace(/^\\s+|\\s+$|/g,\"\")},e=function(a){return(a+\"\").replace(/([.?*+^$[\\]\\\\(){}|-])/g,\"\\\\$1\")},f=Array.isArray||$&&$.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)},g={a:\"[aÀÁÂÃÄÅàáâãäåĀāąĄ]\",c:\"[cÇçćĆčČ]\",d:\"[dđĐďĎ]\",e:\"[eÈÉÊËèéêëěĚĒēęĘ]\",i:\"[iÌÍÎÏìíîïĪī]\",l:\"[lłŁ]\",n:\"[nÑñňŇńŃ]\",o:\"[oÒÓÔÕÕÖØòóôõöøŌō]\",r:\"[rřŘ]\",s:\"[sŠšśŚ]\",t:\"[tťŤ]\",u:\"[uÙÚÛÜùúûüůŮŪū]\",y:\"[yŸÿýÝ]\",z:\"[zŽžżŻźŹ]\"},h=function(){var a,b,c,d,e=\"\",f={};for(c in g)if(g.hasOwnProperty(c))for(d=g[c].substring(2,g[c].length-1),e+=d,a=0,b=d.length;b>a;a++)f[d.charAt(a)]=c;var h=new RegExp(\"[\"+e+\"]\",\"g\");return function(a){return a.replace(h,function(a){return f[a]}).toLowerCase()}}();return a}),function(a,b){\"function\"==typeof define&&define.amd?define(\"microplugin\",b):\"object\"==typeof exports?module.exports=b():a.MicroPlugin=b()}(this,function(){var a={};a.mixin=function(a){a.plugins={},a.prototype.initializePlugins=function(a){var c,d,e,f=this,g=[];if(f.plugins={names:[],settings:{},requested:{},loaded:{}},b.isArray(a))for(c=0,d=a.length;d>c;c++)\"string\"==typeof a[c]?g.push(a[c]):(f.plugins.settings[a[c].name]=a[c].options,g.push(a[c].name));else if(a)for(e in a)a.hasOwnProperty(e)&&(f.plugins.settings[e]=a[e],g.push(e));for(;g.length;)f.require(g.shift())},a.prototype.loadPlugin=function(b){var c=this,d=c.plugins,e=a.plugins[b];if(!a.plugins.hasOwnProperty(b))throw new Error('Unable to find \"'+b+'\" plugin');d.requested[b]=!0,d.loaded[b]=e.fn.apply(c,[c.plugins.settings[b]||{}]),d.names.push(b)},a.prototype.require=function(a){var b=this,c=b.plugins;if(!b.plugins.loaded.hasOwnProperty(a)){if(c.requested[a])throw new Error('Plugin has circular dependency (\"'+a+'\")');b.loadPlugin(a)}return c.loaded[a]},a.define=function(b,c){a.plugins[b]={name:b,fn:c}}};var b={isArray:Array.isArray||function(a){return\"[object Array]\"===Object.prototype.toString.call(a)}};return a}),function(a,b){\"function\"==typeof define&&define.amd?define(\"selectize\",[\"jquery\",\"sifter\",\"microplugin\"],b):\"object\"==typeof exports?module.exports=b(require(\"jquery\"),require(\"sifter\"),require(\"microplugin\")):a.Selectize=b(a.jQuery,a.Sifter,a.MicroPlugin)}(this,function(a,b,c){\"use strict\";var d=function(a,b){if(\"string\"!=typeof b||b.length){var c=\"string\"==typeof b?new RegExp(b,\"i\"):b,d=function(a){var b=0;if(3===a.nodeType){var e=a.data.search(c);if(e>=0&&a.data.length>0){var f=a.data.match(c),g=document.createElement(\"span\");g.className=\"highlight\";var h=a.splitText(e),i=(h.splitText(f[0].length),h.cloneNode(!0));g.appendChild(i),h.parentNode.replaceChild(g,h),b=1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName))for(var j=0;j<a.childNodes.length;++j)j+=d(a.childNodes[j]);return b};return a.each(function(){d(this)})}},e=function(){};e.prototype={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},off:function(a,b){var c=arguments.length;return 0===c?delete this._events:1===c?delete this._events[a]:(this._events=this._events||{},void(a in this._events!=!1&&this._events[a].splice(this._events[a].indexOf(b),1)))},trigger:function(a){if(this._events=this._events||{},a in this._events!=!1)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(a){for(var b=[\"on\",\"off\",\"trigger\"],c=0;c<b.length;c++)a.prototype[b[c]]=e.prototype[b[c]]};var f=/Mac/.test(navigator.userAgent),g=65,h=13,i=27,j=37,k=38,l=80,m=39,n=40,o=78,p=8,q=46,r=16,s=f?91:17,t=f?18:17,u=9,v=1,w=2,x=!/android/i.test(window.navigator.userAgent)&&!!document.createElement(\"form\").validity,y=function(a){return\"undefined\"!=typeof a},z=function(a){return\"undefined\"==typeof a||null===a?null:\"boolean\"==typeof a?a?\"1\":\"0\":a+\"\"},A=function(a){return(a+\"\").replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")},B=function(a){return(a+\"\").replace(/\\$/g,\"$$$$\")},C={};C.before=function(a,b,c){var d=a[b];a[b]=function(){return c.apply(a,arguments),d.apply(a,arguments)}},C.after=function(a,b,c){var d=a[b];a[b]=function(){var b=d.apply(a,arguments);return c.apply(a,arguments),b}};var D=function(a){var b=!1;return function(){b||(b=!0,a.apply(this,arguments))}},E=function(a,b){var c;return function(){var d=this,e=arguments;window.clearTimeout(c),c=window.setTimeout(function(){a.apply(d,e)},b)}},F=function(a,b,c){var d,e=a.trigger,f={};a.trigger=function(){var c=arguments[0];return-1===b.indexOf(c)?e.apply(a,arguments):void(f[c]=arguments)},c.apply(a,[]),a.trigger=e;for(d in f)f.hasOwnProperty(d)&&e.apply(a,f[d])},G=function(a,b,c,d){a.on(b,c,function(b){for(var c=b.target;c&&c.parentNode!==a[0];)c=c.parentNode;return b.currentTarget=c,d.apply(this,[b])})},H=function(a){var b={};if(\"selectionStart\"in a)b.start=a.selectionStart,b.length=a.selectionEnd-b.start;else if(document.selection){a.focus();var c=document.selection.createRange(),d=document.selection.createRange().text.length;c.moveStart(\"character\",-a.value.length),b.start=c.text.length-d,b.length=d}return b},I=function(a,b,c){var d,e,f={};if(c)for(d=0,e=c.length;e>d;d++)f[c[d]]=a.css(c[d]);else f=a.css();b.css(f)},J=function(b,c){if(!b)return 0;var d=a(\"<test>\").css({position:\"absolute\",top:-99999,left:-99999,width:\"auto\",padding:0,whiteSpace:\"pre\"}).text(b).appendTo(\"body\");I(c,d,[\"letterSpacing\",\"fontSize\",\"fontFamily\",\"fontWeight\",\"textTransform\"]);var e=d.width();return d.remove(),e},K=function(a){var b=null,c=function(c,d){var e,f,g,h,i,j,k,l;c=c||window.event||{},d=d||{},c.metaKey||c.altKey||(d.force||a.data(\"grow\")!==!1)&&(e=a.val(),c.type&&\"keydown\"===c.type.toLowerCase()&&(f=c.keyCode,g=f>=97&&122>=f||f>=65&&90>=f||f>=48&&57>=f||32===f,f===q||f===p?(l=H(a[0]),l.length?e=e.substring(0,l.start)+e.substring(l.start+l.length):f===p&&l.start?e=e.substring(0,l.start-1)+e.substring(l.start+1):f===q&&\"undefined\"!=typeof l.start&&(e=e.substring(0,l.start)+e.substring(l.start+1))):g&&(j=c.shiftKey,k=String.fromCharCode(c.keyCode),k=j?k.toUpperCase():k.toLowerCase(),e+=k)),h=a.attr(\"placeholder\"),!e&&h&&(e=h),i=J(e,a)+4,i!==b&&(b=i,a.width(i),a.triggerHandler(\"resize\")))};a.on(\"keydown keyup update blur\",c),c()},L=function(c,d){var e,f,g,h,i=this;h=c[0],h.selectize=i;var j=window.getComputedStyle&&window.getComputedStyle(h,null);if(g=j?j.getPropertyValue(\"direction\"):h.currentStyle&&h.currentStyle.direction,g=g||c.parents(\"[dir]:first\").attr(\"dir\")||\"\",a.extend(i,{order:0,settings:d,$input:c,tabIndex:c.attr(\"tabindex\")||\"\",tagType:\"select\"===h.tagName.toLowerCase()?v:w,rtl:/rtl/i.test(g),eventNS:\".selectize\"+ ++L.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:c.is(\"[required]\"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:\"\",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===d.loadThrottle?i.onSearchChange:E(i.onSearchChange,d.loadThrottle)}),i.sifter=new b(this.options,{diacritics:d.diacritics}),i.settings.options){for(e=0,f=i.settings.options.length;f>e;e++)i.registerOption(i.settings.options[e]);delete i.settings.options}if(i.settings.optgroups){for(e=0,f=i.settings.optgroups.length;f>e;e++)i.registerOptionGroup(i.settings.optgroups[e]);delete i.settings.optgroups}i.settings.mode=i.settings.mode||(1===i.settings.maxItems?\"single\":\"multi\"),\"boolean\"!=typeof i.settings.hideSelected&&(i.settings.hideSelected=\"multi\"===i.settings.mode),i.initializePlugins(i.settings.plugins),i.setupCallbacks(),i.setupTemplates(),i.setup()};return e.mixin(L),c.mixin(L),a.extend(L.prototype,{setup:function(){var b,c,d,e,g,h,i,j,k,l=this,m=l.settings,n=l.eventNS,o=a(window),p=a(document),q=l.$input;if(i=l.settings.mode,j=q.attr(\"class\")||\"\",b=a(\"<div>\").addClass(m.wrapperClass).addClass(j).addClass(i),c=a(\"<div>\").addClass(m.inputClass).addClass(\"items\").appendTo(b),d=a('<input type=\"text\" autocomplete=\"off\" />').appendTo(c).attr(\"tabindex\",q.is(\":disabled\")?\"-1\":l.tabIndex),h=a(m.dropdownParent||b),e=a(\"<div>\").addClass(m.dropdownClass).addClass(i).hide().appendTo(h),g=a(\"<div>\").addClass(m.dropdownContentClass).appendTo(e),l.settings.copyClassesToDropdown&&e.addClass(j),b.css({width:q[0].style.width}),l.plugins.names.length&&(k=\"plugin-\"+l.plugins.names.join(\" plugin-\"),b.addClass(k),e.addClass(k)),(null===m.maxItems||m.maxItems>1)&&l.tagType===v&&q.attr(\"multiple\",\"multiple\"),l.settings.placeholder&&d.attr(\"placeholder\",m.placeholder),!l.settings.splitOn&&l.settings.delimiter){var u=l.settings.delimiter.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g,\"\\\\$&\");l.settings.splitOn=new RegExp(\"\\\\s*\"+u+\"+\\\\s*\")}q.attr(\"autocorrect\")&&d.attr(\"autocorrect\",q.attr(\"autocorrect\")),q.attr(\"autocapitalize\")&&d.attr(\"autocapitalize\",q.attr(\"autocapitalize\")),l.$wrapper=b,l.$control=c,l.$control_input=d,l.$dropdown=e,l.$dropdown_content=g,e.on(\"mouseenter\",\"[data-selectable]\",function(){return l.onOptionHover.apply(l,arguments)}),e.on(\"mousedown click\",\"[data-selectable]\",function(){return l.onOptionSelect.apply(l,arguments)}),G(c,\"mousedown\",\"*:not(input)\",function(){return l.onItemSelect.apply(l,arguments)}),K(d),c.on({mousedown:function(){return l.onMouseDown.apply(l,arguments)},click:function(){return l.onClick.apply(l,arguments)}}),d.on({mousedown:function(a){a.stopPropagation()},keydown:function(){return l.onKeyDown.apply(l,arguments)},keyup:function(){return l.onKeyUp.apply(l,arguments)},keypress:function(){return l.onKeyPress.apply(l,arguments)},resize:function(){l.positionDropdown.apply(l,[])},blur:function(){return l.onBlur.apply(l,arguments)},focus:function(){return l.ignoreBlur=!1,l.onFocus.apply(l,arguments)},paste:function(){return l.onPaste.apply(l,arguments)}}),p.on(\"keydown\"+n,function(a){l.isCmdDown=a[f?\"metaKey\":\"ctrlKey\"],l.isCtrlDown=a[f?\"altKey\":\"ctrlKey\"],l.isShiftDown=a.shiftKey}),p.on(\"keyup\"+n,function(a){a.keyCode===t&&(l.isCtrlDown=!1),a.keyCode===r&&(l.isShiftDown=!1),a.keyCode===s&&(l.isCmdDown=!1)}),p.on(\"mousedown\"+n,function(a){if(l.isFocused){if(a.target===l.$dropdown[0]||a.target.parentNode===l.$dropdown[0])return!1;l.$control.has(a.target).length||a.target===l.$control[0]||l.blur(a.target)}}),o.on([\"scroll\"+n,\"resize\"+n].join(\" \"),function(){l.isOpen&&l.positionDropdown.apply(l,arguments)}),o.on(\"mousemove\"+n,function(){l.ignoreHover=!1}),this.revertSettings={$children:q.children().detach(),tabindex:q.attr(\"tabindex\")},q.attr(\"tabindex\",-1).hide().after(l.$wrapper),a.isArray(m.items)&&(l.setValue(m.items),delete m.items),x&&q.on(\"invalid\"+n,function(a){a.preventDefault(),l.isInvalid=!0,l.refreshState()}),l.updateOriginalInput(),l.refreshItems(),l.refreshState(),l.updatePlaceholder(),l.isSetup=!0,q.is(\":disabled\")&&l.disable(),l.on(\"change\",this.onChange),q.data(\"selectize\",l),q.addClass(\"selectized\"),l.trigger(\"initialize\"),m.preload===!0&&l.onSearchChange(\"\")},setupTemplates:function(){var b=this,c=b.settings.labelField,d=b.settings.optgroupLabelField,e={optgroup:function(a){return'<div class=\"optgroup\">'+a.html+\"</div>\"},optgroup_header:function(a,b){return'<div class=\"optgroup-header\">'+b(a[d])+\"</div>\"},option:function(a,b){return'<div class=\"option\">'+b(a[c])+\"</div>\"},item:function(a,b){return'<div class=\"item\">'+b(a[c])+\"</div>\"},option_create:function(a,b){return'<div class=\"create\">Add <strong>'+b(a.input)+\"</strong>&hellip;</div>\"}};b.settings.render=a.extend({},e,b.settings.render)},setupCallbacks:function(){var a,b,c={initialize:\"onInitialize\",change:\"onChange\",item_add:\"onItemAdd\",item_remove:\"onItemRemove\",clear:\"onClear\",option_add:\"onOptionAdd\",option_remove:\"onOptionRemove\",option_clear:\"onOptionClear\",optgroup_add:\"onOptionGroupAdd\",optgroup_remove:\"onOptionGroupRemove\",optgroup_clear:\"onOptionGroupClear\",dropdown_open:\"onDropdownOpen\",dropdown_close:\"onDropdownClose\",type:\"onType\",load:\"onLoad\",focus:\"onFocus\",blur:\"onBlur\"};for(a in c)c.hasOwnProperty(a)&&(b=this.settings[c[a]],b&&this.on(a,b))},onClick:function(a){var b=this;b.isFocused||(b.focus(),a.preventDefault())},onMouseDown:function(b){{var c=this,d=b.isDefaultPrevented();a(b.target)}if(c.isFocused){if(b.target!==c.$control_input[0])return\"single\"===c.settings.mode?c.isOpen?c.close():c.open():d||c.setActiveItem(null),!1}else d||window.setTimeout(function(){c.focus()},0)},onChange:function(){this.$input.trigger(\"change\")},onPaste:function(b){var c=this;c.isFull()||c.isInputHidden||c.isLocked?b.preventDefault():c.settings.splitOn&&setTimeout(function(){for(var b=a.trim(c.$control_input.val()||\"\").split(c.settings.splitOn),d=0,e=b.length;e>d;d++)c.createItem(b[d])},0)},onKeyPress:function(a){if(this.isLocked)return a&&a.preventDefault();var b=String.fromCharCode(a.keyCode||a.which);return this.settings.create&&\"multi\"===this.settings.mode&&b===this.settings.delimiter?(this.createItem(),a.preventDefault(),!1):void 0},onKeyDown:function(a){var b=(a.target===this.$control_input[0],this);if(b.isLocked)return void(a.keyCode!==u&&a.preventDefault());switch(a.keyCode){case g:if(b.isCmdDown)return void b.selectAll();break;case i:return void(b.isOpen&&(a.preventDefault(),a.stopPropagation(),b.close()));case o:if(!a.ctrlKey||a.altKey)break;case n:if(!b.isOpen&&b.hasOptions)b.open();else if(b.$activeOption){b.ignoreHover=!0;var c=b.getAdjacentOption(b.$activeOption,1);c.length&&b.setActiveOption(c,!0,!0)}return void a.preventDefault();case l:if(!a.ctrlKey||a.altKey)break;case k:if(b.$activeOption){b.ignoreHover=!0;var d=b.getAdjacentOption(b.$activeOption,-1);d.length&&b.setActiveOption(d,!0,!0)}return void a.preventDefault();case h:return void(b.isOpen&&b.$activeOption&&(b.onOptionSelect({currentTarget:b.$activeOption}),a.preventDefault()));case j:return void b.advanceSelection(-1,a);case m:return void b.advanceSelection(1,a);case u:return b.settings.selectOnTab&&b.isOpen&&b.$activeOption&&(b.onOptionSelect({currentTarget:b.$activeOption}),b.isFull()||a.preventDefault()),void(b.settings.create&&b.createItem()&&a.preventDefault());case p:case q:return void b.deleteSelection(a)}return!b.isFull()&&!b.isInputHidden||(f?a.metaKey:a.ctrlKey)?void 0:void a.preventDefault()},onKeyUp:function(a){var b=this;if(b.isLocked)return a&&a.preventDefault();var c=b.$control_input.val()||\"\";b.lastValue!==c&&(b.lastValue=c,b.onSearchChange(c),b.refreshOptions(),b.trigger(\"type\",c))},onSearchChange:function(a){var b=this,c=b.settings.load;c&&(b.loadedSearches.hasOwnProperty(a)||(b.loadedSearches[a]=!0,b.load(function(d){c.apply(b,[a,d])})))},onFocus:function(a){var b=this,c=b.isFocused;return b.isDisabled?(b.blur(),a&&a.preventDefault(),!1):void(b.ignoreFocus||(b.isFocused=!0,\"focus\"===b.settings.preload&&b.onSearchChange(\"\"),c||b.trigger(\"focus\"),b.$activeItems.length||(b.showInput(),b.setActiveItem(null),b.refreshOptions(!!b.settings.openOnFocus)),b.refreshState()))},onBlur:function(a,b){var c=this;if(c.isFocused&&(c.isFocused=!1,!c.ignoreFocus)){if(!c.ignoreBlur&&document.activeElement===c.$dropdown_content[0])return c.ignoreBlur=!0,void c.onFocus(a);var d=function(){c.close(),c.setTextboxValue(\"\"),c.setActiveItem(null),c.setActiveOption(null),c.setCaret(c.items.length),c.refreshState(),(b||document.body).focus(),c.ignoreFocus=!1,c.trigger(\"blur\")};c.ignoreFocus=!0,c.settings.create&&c.settings.createOnBlur?c.createItem(null,!1,d):d()}},onOptionHover:function(a){this.ignoreHover||this.setActiveOption(a.currentTarget,!1)},onOptionSelect:function(b){var c,d,e=this;b.preventDefault&&(b.preventDefault(),b.stopPropagation()),d=a(b.currentTarget),d.hasClass(\"create\")?e.createItem(null,function(){e.settings.closeAfterSelect&&e.close()}):(c=d.attr(\"data-value\"),\"undefined\"!=typeof c&&(e.lastQuery=null,e.setTextboxValue(\"\"),e.addItem(c),e.settings.closeAfterSelect?e.close():!e.settings.hideSelected&&b.type&&/mouse/.test(b.type)&&e.setActiveOption(e.getOption(c))))},onItemSelect:function(a){var b=this;b.isLocked||\"multi\"===b.settings.mode&&(a.preventDefault(),b.setActiveItem(a.currentTarget,a))},load:function(a){var b=this,c=b.$wrapper.addClass(b.settings.loadingClass);b.loading++,a.apply(b,[function(a){b.loading=Math.max(b.loading-1,0),a&&a.length&&(b.addOption(a),b.refreshOptions(b.isFocused&&!b.isInputHidden)),b.loading||c.removeClass(b.settings.loadingClass),b.trigger(\"load\",a)}])},setTextboxValue:function(a){var b=this.$control_input,c=b.val()!==a;c&&(b.val(a).triggerHandler(\"update\"),this.lastValue=a)},getValue:function(){return this.tagType===v&&this.$input.attr(\"multiple\")?this.items:this.items.join(this.settings.delimiter)},setValue:function(a,b){var c=b?[]:[\"change\"];F(this,c,function(){this.clear(b),this.addItems(a,b)})},setActiveItem:function(b,c){var d,e,f,g,h,i,j,k,l=this;if(\"single\"!==l.settings.mode){if(b=a(b),!b.length)return a(l.$activeItems).removeClass(\"active\"),l.$activeItems=[],void(l.isFocused&&l.showInput());if(d=c&&c.type.toLowerCase(),\"mousedown\"===d&&l.isShiftDown&&l.$activeItems.length){for(k=l.$control.children(\".active:last\"),g=Array.prototype.indexOf.apply(l.$control[0].childNodes,[k[0]]),h=Array.prototype.indexOf.apply(l.$control[0].childNodes,[b[0]]),g>h&&(j=g,g=h,h=j),e=g;h>=e;e++)i=l.$control[0].childNodes[e],-1===l.$activeItems.indexOf(i)&&(a(i).addClass(\"active\"),l.$activeItems.push(i));c.preventDefault()}else\"mousedown\"===d&&l.isCtrlDown||\"keydown\"===d&&this.isShiftDown?b.hasClass(\"active\")?(f=l.$activeItems.indexOf(b[0]),l.$activeItems.splice(f,1),b.removeClass(\"active\")):l.$activeItems.push(b.addClass(\"active\")[0]):(a(l.$activeItems).removeClass(\"active\"),l.$activeItems=[b.addClass(\"active\")[0]]);l.hideInput(),this.isFocused||l.focus()}},setActiveOption:function(b,c,d){var e,f,g,h,i,j=this;j.$activeOption&&j.$activeOption.removeClass(\"active\"),j.$activeOption=null,b=a(b),b.length&&(j.$activeOption=b.addClass(\"active\"),(c||!y(c))&&(e=j.$dropdown_content.height(),f=j.$activeOption.outerHeight(!0),c=j.$dropdown_content.scrollTop()||0,g=j.$activeOption.offset().top-j.$dropdown_content.offset().top+c,h=g,i=g-e+f,g+f>e+c?j.$dropdown_content.stop().animate({scrollTop:i},d?j.settings.scrollDuration:0):c>g&&j.$dropdown_content.stop().animate({scrollTop:h},d?j.settings.scrollDuration:0)))},selectAll:function(){var a=this;\"single\"!==a.settings.mode&&(a.$activeItems=Array.prototype.slice.apply(a.$control.children(\":not(input)\").addClass(\"active\")),a.$activeItems.length&&(a.hideInput(),a.close()),a.focus())},hideInput:function(){var a=this;a.setTextboxValue(\"\"),a.$control_input.css({opacity:0,position:\"absolute\",left:a.rtl?1e4:-1e4}),a.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:\"relative\",left:0}),this.isInputHidden=!1},focus:function(){var a=this;a.isDisabled||(a.ignoreFocus=!0,a.$control_input[0].focus(),window.setTimeout(function(){a.ignoreFocus=!1,a.onFocus()},0))},blur:function(a){this.$control_input[0].blur(),this.onBlur(null,a)},getScoreFunction:function(a){return this.sifter.getScoreFunction(a,this.getSearchOptions())},getSearchOptions:function(){var a=this.settings,b=a.sortField;return\"string\"==typeof b&&(b=[{field:b}]),{fields:a.searchField,conjunction:a.searchConjunction,sort:b}},search:function(b){var c,d,e,f=this,g=f.settings,h=this.getSearchOptions();if(g.score&&(e=f.settings.score.apply(this,[b]),\"function\"!=typeof e))throw new Error('Selectize \"score\" setting must be a function that returns a function');if(b!==f.lastQuery?(f.lastQuery=b,d=f.sifter.search(b,a.extend(h,{score:e})),f.currentResults=d):d=a.extend(!0,{},f.currentResults),g.hideSelected)for(c=d.items.length-1;c>=0;c--)-1!==f.items.indexOf(z(d.items[c].id))&&d.items.splice(c,1);return d},refreshOptions:function(b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;\"undefined\"==typeof b&&(b=!0);var t=this,u=a.trim(t.$control_input.val()),v=t.search(u),w=t.$dropdown_content,x=t.$activeOption&&z(t.$activeOption.attr(\"data-value\"));for(g=v.items.length,\"number\"==typeof t.settings.maxOptions&&(g=Math.min(g,t.settings.maxOptions)),h={},i=[],c=0;g>c;c++)for(j=t.options[v.items[c].id],k=t.render(\"option\",j),l=j[t.settings.optgroupField]||\"\",m=a.isArray(l)?l:[l],e=0,f=m&&m.length;f>e;e++)l=m[e],t.optgroups.hasOwnProperty(l)||(l=\"\"),h.hasOwnProperty(l)||(h[l]=[],i.push(l)),h[l].push(k);for(this.settings.lockOptgroupOrder&&i.sort(function(a,b){var c=t.optgroups[a].$order||0,d=t.optgroups[b].$order||0;return c-d}),n=[],c=0,g=i.length;g>c;c++)l=i[c],t.optgroups.hasOwnProperty(l)&&h[l].length?(o=t.render(\"optgroup_header\",t.optgroups[l])||\"\",o+=h[l].join(\"\"),n.push(t.render(\"optgroup\",a.extend({},t.optgroups[l],{html:o})))):n.push(h[l].join(\"\"));if(w.html(n.join(\"\")),t.settings.highlight&&v.query.length&&v.tokens.length)for(c=0,g=v.tokens.length;g>c;c++)d(w,v.tokens[c].regex);if(!t.settings.hideSelected)for(c=0,g=t.items.length;g>c;c++)t.getOption(t.items[c]).addClass(\"selected\");p=t.canCreate(u),p&&(w.prepend(t.render(\"option_create\",{input:u})),s=a(w[0].childNodes[0])),t.hasOptions=v.items.length>0||p,t.hasOptions?(v.items.length>0?(r=x&&t.getOption(x),r&&r.length?q=r:\"single\"===t.settings.mode&&t.items.length&&(q=t.getOption(t.items[0])),q&&q.length||(q=s&&!t.settings.addPrecedence?t.getAdjacentOption(s,1):w.find(\"[data-selectable]:first\"))):q=s,t.setActiveOption(q),b&&!t.isOpen&&t.open()):(t.setActiveOption(null),b&&t.isOpen&&t.close())},addOption:function(b){var c,d,e,f=this;if(a.isArray(b))for(c=0,d=b.length;d>c;c++)f.addOption(b[c]);else(e=f.registerOption(b))&&(f.userOptions[e]=!0,f.lastQuery=null,f.trigger(\"option_add\",e,b))},registerOption:function(a){var b=z(a[this.settings.valueField]);return!b||this.options.hasOwnProperty(b)?!1:(a.$order=a.$order||++this.order,this.options[b]=a,b)},registerOptionGroup:function(a){var b=z(a[this.settings.optgroupValueField]);return b?(a.$order=a.$order||++this.order,this.optgroups[b]=a,b):!1},addOptionGroup:function(a,b){b[this.settings.optgroupValueField]=a,(a=this.registerOptionGroup(b))&&this.trigger(\"optgroup_add\",a,b)},removeOptionGroup:function(a){this.optgroups.hasOwnProperty(a)&&(delete this.optgroups[a],this.renderCache={},this.trigger(\"optgroup_remove\",a))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger(\"optgroup_clear\")},updateOption:function(b,c){var d,e,f,g,h,i,j,k=this;if(b=z(b),f=z(c[k.settings.valueField]),null!==b&&k.options.hasOwnProperty(b)){if(\"string\"!=typeof f)throw new Error(\"Value must be set in option data\");j=k.options[b].$order,f!==b&&(delete k.options[b],g=k.items.indexOf(b),-1!==g&&k.items.splice(g,1,f)),c.$order=c.$order||j,k.options[f]=c,h=k.renderCache.item,i=k.renderCache.option,h&&(delete h[b],delete h[f]),i&&(delete i[b],delete i[f]),-1!==k.items.indexOf(f)&&(d=k.getItem(b),e=a(k.render(\"item\",c)),d.hasClass(\"active\")&&e.addClass(\"active\"),d.replaceWith(e)),k.lastQuery=null,k.isOpen&&k.refreshOptions(!1)}},removeOption:function(a,b){var c=this;a=z(a);var d=c.renderCache.item,e=c.renderCache.option;d&&delete d[a],e&&delete e[a],delete c.userOptions[a],delete c.options[a],c.lastQuery=null,c.trigger(\"option_remove\",a),c.removeItem(a,b)},clearOptions:function(){var a=this;a.loadedSearches={},a.userOptions={},a.renderCache={},a.options=a.sifter.items={},a.lastQuery=null,a.trigger(\"option_clear\"),a.clear()},getOption:function(a){return this.getElementWithValue(a,this.$dropdown_content.find(\"[data-selectable]\"))},getAdjacentOption:function(b,c){var d=this.$dropdown.find(\"[data-selectable]\"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},getElementWithValue:function(b,c){if(b=z(b),\"undefined\"!=typeof b&&null!==b)for(var d=0,e=c.length;e>d;d++)if(c[d].getAttribute(\"data-value\")===b)return a(c[d]);return a()},getItem:function(a){return this.getElementWithValue(a,this.$control.children())},addItems:function(b,c){for(var d=a.isArray(b)?b:[b],e=0,f=d.length;f>e;e++)this.isPending=f-1>e,this.addItem(d[e],c)},addItem:function(b,c){var d=c?[]:[\"change\"];F(this,d,function(){var d,e,f,g,h,i=this,j=i.settings.mode;return b=z(b),-1!==i.items.indexOf(b)?void(\"single\"===j&&i.close()):void(i.options.hasOwnProperty(b)&&(\"single\"===j&&i.clear(c),\"multi\"===j&&i.isFull()||(d=a(i.render(\"item\",i.options[b])),h=i.isFull(),i.items.splice(i.caretPos,0,b),i.insertAtCaret(d),(!i.isPending||!h&&i.isFull())&&i.refreshState(),i.isSetup&&(f=i.$dropdown_content.find(\"[data-selectable]\"),i.isPending||(e=i.getOption(b),g=i.getAdjacentOption(e,1).attr(\"data-value\"),i.refreshOptions(i.isFocused&&\"single\"!==j),g&&i.setActiveOption(i.getOption(g))),!f.length||i.isFull()?i.close():i.positionDropdown(),i.updatePlaceholder(),i.trigger(\"item_add\",b,d),i.updateOriginalInput({silent:c})))))})},removeItem:function(a,b){var c,d,e,f=this;c=\"object\"==typeof a?a:f.getItem(a),a=z(c.attr(\"data-value\")),d=f.items.indexOf(a),-1!==d&&(c.remove(),c.hasClass(\"active\")&&(e=f.$activeItems.indexOf(c[0]),f.$activeItems.splice(e,1)),f.items.splice(d,1),f.lastQuery=null,!f.settings.persist&&f.userOptions.hasOwnProperty(a)&&f.removeOption(a,b),d<f.caretPos&&f.setCaret(f.caretPos-1),f.refreshState(),f.updatePlaceholder(),f.updateOriginalInput({silent:b}),f.positionDropdown(),f.trigger(\"item_remove\",a,c))},createItem:function(b,c){var d=this,e=d.caretPos;b=b||a.trim(d.$control_input.val()||\"\");var f=arguments[arguments.length-1];if(\"function\"!=typeof f&&(f=function(){}),\"boolean\"!=typeof c&&(c=!0),!d.canCreate(b))return f(),!1;d.lock();var g=\"function\"==typeof d.settings.create?this.settings.create:function(a){var b={};return b[d.settings.labelField]=a,b[d.settings.valueField]=a,b},h=D(function(a){if(d.unlock(),!a||\"object\"!=typeof a)return f();var b=z(a[d.settings.valueField]);return\"string\"!=typeof b?f():(d.setTextboxValue(\"\"),d.addOption(a),d.setCaret(e),d.addItem(b),d.refreshOptions(c&&\"single\"!==d.settings.mode),void f(a))}),i=g.apply(this,[b,h]);return\"undefined\"!=typeof i&&h(i),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){var a,b=this;b.isRequired&&(b.items.length&&(b.isInvalid=!1),b.$control_input.prop(\"required\",a)),b.refreshClasses()},refreshClasses:function(){var b=this,c=b.isFull(),d=b.isLocked;b.$wrapper.toggleClass(\"rtl\",b.rtl),b.$control.toggleClass(\"focus\",b.isFocused).toggleClass(\"disabled\",b.isDisabled).toggleClass(\"required\",b.isRequired).toggleClass(\"invalid\",b.isInvalid).toggleClass(\"locked\",d).toggleClass(\"full\",c).toggleClass(\"not-full\",!c).toggleClass(\"input-active\",b.isFocused&&!b.isInputHidden).toggleClass(\"dropdown-active\",b.isOpen).toggleClass(\"has-options\",!a.isEmptyObject(b.options)).toggleClass(\"has-items\",b.items.length>0),b.$control_input.data(\"grow\",!c&&!d)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(a){var b,c,d,e,f=this;if(a=a||{},f.tagType===v){for(d=[],b=0,c=f.items.length;c>b;b++)e=f.options[f.items[b]][f.settings.labelField]||\"\",d.push('<option value=\"'+A(f.items[b])+'\" selected=\"selected\">'+A(e)+\"</option>\");d.length||this.$input.attr(\"multiple\")||d.push('<option value=\"\" selected=\"selected\"></option>'),f.$input.html(d.join(\"\"))}else f.$input.val(f.getValue()),f.$input.attr(\"value\",f.$input.val());f.isSetup&&(a.silent||f.trigger(\"change\",f.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var a=this.$control_input;this.items.length?a.removeAttr(\"placeholder\"):a.attr(\"placeholder\",this.settings.placeholder),a.triggerHandler(\"update\",{force:!0})}},open:function(){var a=this;a.isLocked||a.isOpen||\"multi\"===a.settings.mode&&a.isFull()||(a.focus(),a.isOpen=!0,a.refreshState(),a.$dropdown.css({visibility:\"hidden\",display:\"block\"}),a.positionDropdown(),a.$dropdown.css({visibility:\"visible\"}),a.trigger(\"dropdown_open\",a.$dropdown))},close:function(){var a=this,b=a.isOpen;\"single\"===a.settings.mode&&a.items.length&&a.hideInput(),a.isOpen=!1,a.$dropdown.hide(),a.setActiveOption(null),a.refreshState(),b&&a.trigger(\"dropdown_close\",a.$dropdown)},positionDropdown:function(){var a=this.$control,b=\"body\"===this.settings.dropdownParent?a.offset():a.position();b.top+=a.outerHeight(!0),this.$dropdown.css({width:a.outerWidth(),top:b.top,left:b.left})},clear:function(a){var b=this;b.items.length&&(b.$control.children(\":not(input)\").remove(),b.items=[],b.lastQuery=null,b.setCaret(0),b.setActiveItem(null),b.updatePlaceholder(),b.updateOriginalInput({silent:a}),b.refreshState(),b.showInput(),b.trigger(\"clear\"))},insertAtCaret:function(b){var c=Math.min(this.caretPos,this.items.length);0===c?this.$control.prepend(b):a(this.$control[0].childNodes[c]).before(b),this.setCaret(c+1)},deleteSelection:function(b){var c,d,e,f,g,h,i,j,k,l=this;if(e=b&&b.keyCode===p?-1:1,f=H(l.$control_input[0]),l.$activeOption&&!l.settings.hideSelected&&(i=l.getAdjacentOption(l.$activeOption,-1).attr(\"data-value\")),g=[],l.$activeItems.length){for(k=l.$control.children(\".active:\"+(e>0?\"last\":\"first\")),h=l.$control.children(\":not(input)\").index(k),e>0&&h++,c=0,d=l.$activeItems.length;d>c;c++)g.push(a(l.$activeItems[c]).attr(\"data-value\"));\nb&&(b.preventDefault(),b.stopPropagation())}else(l.isFocused||\"single\"===l.settings.mode)&&l.items.length&&(0>e&&0===f.start&&0===f.length?g.push(l.items[l.caretPos-1]):e>0&&f.start===l.$control_input.val().length&&g.push(l.items[l.caretPos]));if(!g.length||\"function\"==typeof l.settings.onDelete&&l.settings.onDelete.apply(l,[g])===!1)return!1;for(\"undefined\"!=typeof h&&l.setCaret(h);g.length;)l.removeItem(g.pop());return l.showInput(),l.positionDropdown(),l.refreshOptions(!0),i&&(j=l.getOption(i),j.length&&l.setActiveOption(j)),!0},advanceSelection:function(a,b){var c,d,e,f,g,h,i=this;0!==a&&(i.rtl&&(a*=-1),c=a>0?\"last\":\"first\",d=H(i.$control_input[0]),i.isFocused&&!i.isInputHidden?(f=i.$control_input.val().length,g=0>a?0===d.start&&0===d.length:d.start===f,g&&!f&&i.advanceCaret(a,b)):(h=i.$control.children(\".active:\"+c),h.length&&(e=i.$control.children(\":not(input)\").index(h),i.setActiveItem(null),i.setCaret(a>0?e+1:e))))},advanceCaret:function(a,b){var c,d,e=this;0!==a&&(c=a>0?\"next\":\"prev\",e.isShiftDown?(d=e.$control_input[c](),d.length&&(e.hideInput(),e.setActiveItem(d),b&&b.preventDefault())):e.setCaret(e.caretPos+a))},setCaret:function(b){var c=this;if(b=\"single\"===c.settings.mode?c.items.length:Math.max(0,Math.min(c.items.length,b)),!c.isPending){var d,e,f,g;for(f=c.$control.children(\":not(input)\"),d=0,e=f.length;e>d;d++)g=a(f[d]).detach(),b>d?c.$control_input.before(g):c.$control.append(g)}c.caretPos=b},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var a=this;a.$input.prop(\"disabled\",!0),a.$control_input.prop(\"disabled\",!0).prop(\"tabindex\",-1),a.isDisabled=!0,a.lock()},enable:function(){var a=this;a.$input.prop(\"disabled\",!1),a.$control_input.prop(\"disabled\",!1).prop(\"tabindex\",a.tabIndex),a.isDisabled=!1,a.unlock()},destroy:function(){var b=this,c=b.eventNS,d=b.revertSettings;b.trigger(\"destroy\"),b.off(),b.$wrapper.remove(),b.$dropdown.remove(),b.$input.html(\"\").append(d.$children).removeAttr(\"tabindex\").removeClass(\"selectized\").attr({tabindex:d.tabindex}).show(),b.$control_input.removeData(\"grow\"),b.$input.removeData(\"selectize\"),a(window).off(c),a(document).off(c),a(document.body).off(c),delete b.$input[0].selectize},render:function(a,b){var c,d,e=\"\",f=!1,g=this,h=/^[\\t \\r\\n]*<([a-z][a-z0-9\\-_]*(?:\\:[a-z][a-z0-9\\-_]*)?)/i;return(\"option\"===a||\"item\"===a)&&(c=z(b[g.settings.valueField]),f=!!c),f&&(y(g.renderCache[a])||(g.renderCache[a]={}),g.renderCache[a].hasOwnProperty(c))?g.renderCache[a][c]:(e=g.settings.render[a].apply(this,[b,A]),(\"option\"===a||\"option_create\"===a)&&(e=e.replace(h,\"<$1 data-selectable\")),\"optgroup\"===a&&(d=b[g.settings.optgroupValueField]||\"\",e=e.replace(h,'<$1 data-group=\"'+B(A(d))+'\"')),(\"option\"===a||\"item\"===a)&&(e=e.replace(h,'<$1 data-value=\"'+B(A(c||\"\"))+'\"')),f&&(g.renderCache[a][c]=e),e)},clearCache:function(a){var b=this;\"undefined\"==typeof a?b.renderCache={}:delete b.renderCache[a]},canCreate:function(a){var b=this;if(!b.settings.create)return!1;var c=b.settings.createFilter;return!(!a.length||\"function\"==typeof c&&!c.apply(b,[a])||\"string\"==typeof c&&!new RegExp(c).test(a)||c instanceof RegExp&&!c.test(a))}}),L.count=0,L.defaults={options:[],optgroups:[],plugins:[],delimiter:\",\",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:\"loading\",dataAttr:\"data-data\",optgroupField:\"optgroup\",valueField:\"value\",labelField:\"text\",optgroupLabelField:\"label\",optgroupValueField:\"value\",lockOptgroupOrder:!1,sortField:\"$order\",searchField:[\"text\"],searchConjunction:\"and\",mode:null,wrapperClass:\"selectize-control\",inputClass:\"selectize-input\",dropdownClass:\"selectize-dropdown\",dropdownContentClass:\"selectize-dropdown-content\",dropdownParent:null,copyClassesToDropdown:!0,render:{}},a.fn.selectize=function(b){var c=a.fn.selectize.defaults,d=a.extend({},c,b),e=d.dataAttr,f=d.labelField,g=d.valueField,h=d.optgroupField,i=d.optgroupLabelField,j=d.optgroupValueField,k=function(b,c){var h,i,j,k,l=b.attr(e);if(l)for(c.options=JSON.parse(l),h=0,i=c.options.length;i>h;h++)c.items.push(c.options[h][g]);else{var m=a.trim(b.val()||\"\");if(!d.allowEmptyOption&&!m.length)return;for(j=m.split(d.delimiter),h=0,i=j.length;i>h;h++)k={},k[f]=j[h],k[g]=j[h],c.options.push(k);c.items=j}},l=function(b,c){var k,l,m,n,o=c.options,p={},q=function(a){var b=e&&a.attr(e);return\"string\"==typeof b&&b.length?JSON.parse(b):null},r=function(b,e){b=a(b);var i=z(b.attr(\"value\"));if(i||d.allowEmptyOption)if(p.hasOwnProperty(i)){if(e){var j=p[i][h];j?a.isArray(j)?j.push(e):p[i][h]=[j,e]:p[i][h]=e}}else{var k=q(b)||{};k[f]=k[f]||b.text(),k[g]=k[g]||i,k[h]=k[h]||e,p[i]=k,o.push(k),b.is(\":selected\")&&c.items.push(i)}},s=function(b){var d,e,f,g,h;for(b=a(b),f=b.attr(\"label\"),f&&(g=q(b)||{},g[i]=f,g[j]=f,c.optgroups.push(g)),h=a(\"option\",b),d=0,e=h.length;e>d;d++)r(h[d],f)};for(c.maxItems=b.attr(\"multiple\")?null:1,n=b.children(),k=0,l=n.length;l>k;k++)m=n[k].tagName.toLowerCase(),\"optgroup\"===m?s(n[k]):\"option\"===m&&r(n[k])};return this.each(function(){if(!this.selectize){var e,f=a(this),g=this.tagName.toLowerCase(),h=f.attr(\"placeholder\")||f.attr(\"data-placeholder\");h||d.allowEmptyOption||(h=f.children('option[value=\"\"]').text());var i={placeholder:h,options:[],optgroups:[],items:[]};\"select\"===g?l(f,i):k(f,i),e=new L(f,a.extend(!0,{},c,i,b))}})},a.fn.selectize.defaults=L.defaults,a.fn.selectize.support={validity:x},L.define(\"drag_drop\",function(){if(!a.fn.sortable)throw new Error('The \"drag_drop\" plugin requires jQuery UI \"sortable\".');if(\"multi\"===this.settings.mode){var b=this;b.lock=function(){var a=b.lock;return function(){var c=b.$control.data(\"sortable\");return c&&c.disable(),a.apply(b,arguments)}}(),b.unlock=function(){var a=b.unlock;return function(){var c=b.$control.data(\"sortable\");return c&&c.enable(),a.apply(b,arguments)}}(),b.setup=function(){var c=b.setup;return function(){c.apply(this,arguments);var d=b.$control.sortable({items:\"[data-value]\",forcePlaceholderSize:!0,disabled:b.isLocked,start:function(a,b){b.placeholder.css(\"width\",b.helper.css(\"width\")),d.css({overflow:\"visible\"})},stop:function(){d.css({overflow:\"hidden\"});var c=b.$activeItems?b.$activeItems.slice():null,e=[];d.children(\"[data-value]\").each(function(){e.push(a(this).attr(\"data-value\"))}),b.setValue(e),b.setActiveItem(c)}})}}()}}),L.define(\"dropdown_header\",function(b){var c=this;b=a.extend({title:\"Untitled\",headerClass:\"selectize-dropdown-header\",titleRowClass:\"selectize-dropdown-header-title\",labelClass:\"selectize-dropdown-header-label\",closeClass:\"selectize-dropdown-header-close\",html:function(a){return'<div class=\"'+a.headerClass+'\"><div class=\"'+a.titleRowClass+'\"><span class=\"'+a.labelClass+'\">'+a.title+'</span><a href=\"javascript:void(0)\" class=\"'+a.closeClass+'\">&times;</a></div></div>'}},b),c.setup=function(){var d=c.setup;return function(){d.apply(c,arguments),c.$dropdown_header=a(b.html(b)),c.$dropdown.prepend(c.$dropdown_header)}}()}),L.define(\"optgroup_columns\",function(b){var c=this;b=a.extend({equalizeWidth:!0,equalizeHeight:!0},b),this.getAdjacentOption=function(b,c){var d=b.closest(\"[data-group]\").find(\"[data-selectable]\"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},this.onKeyDown=function(){var a=c.onKeyDown;return function(b){var d,e,f,g;return!this.isOpen||b.keyCode!==j&&b.keyCode!==m?a.apply(this,arguments):(c.ignoreHover=!0,g=this.$activeOption.closest(\"[data-group]\"),d=g.find(\"[data-selectable]\").index(this.$activeOption),g=b.keyCode===j?g.prev(\"[data-group]\"):g.next(\"[data-group]\"),f=g.find(\"[data-selectable]\"),e=f.eq(Math.min(f.length-1,d)),void(e.length&&this.setActiveOption(e)))}}();var d=function(){var a,b=d.width,c=document;return\"undefined\"==typeof b&&(a=c.createElement(\"div\"),a.innerHTML='<div style=\"width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;\"><div style=\"width:1px;height:100px;\"></div></div>',a=a.firstChild,c.body.appendChild(a),b=d.width=a.offsetWidth-a.clientWidth,c.body.removeChild(a)),b},e=function(){var e,f,g,h,i,j,k;if(k=a(\"[data-group]\",c.$dropdown_content),f=k.length,f&&c.$dropdown_content.width()){if(b.equalizeHeight){for(g=0,e=0;f>e;e++)g=Math.max(g,k.eq(e).height());k.css({height:g})}b.equalizeWidth&&(j=c.$dropdown_content.innerWidth()-d(),h=Math.round(j/f),k.css({width:h}),f>1&&(i=j-h*(f-1),k.eq(f-1).css({width:i})))}};(b.equalizeHeight||b.equalizeWidth)&&(C.after(this,\"positionDropdown\",e),C.after(this,\"refreshOptions\",e))}),L.define(\"remove_button\",function(b){if(\"single\"!==this.settings.mode){b=a.extend({label:\"&times;\",title:\"Remove\",className:\"remove\",append:!0},b);var c=this,d='<a href=\"javascript:void(0)\" class=\"'+b.className+'\" tabindex=\"-1\" title=\"'+A(b.title)+'\">'+b.label+\"</a>\",e=function(a,b){var c=a.search(/(<\\/[^>]+>\\s*)$/);return a.substring(0,c)+b+a.substring(c)};this.setup=function(){var f=c.setup;return function(){if(b.append){var g=c.settings.render.item;c.settings.render.item=function(){return e(g.apply(this,arguments),d)}}f.apply(this,arguments),this.$control.on(\"click\",\".\"+b.className,function(b){if(b.preventDefault(),!c.isLocked){var d=a(b.currentTarget).parent();c.setActiveItem(d),c.deleteSelection()&&c.setCaret(c.items.length)}})}}()}}),L.define(\"restore_on_backspace\",function(a){var b=this;a.text=a.text||function(a){return a[this.settings.labelField]},this.onKeyDown=function(){var c=b.onKeyDown;return function(b){var d,e;return b.keyCode===p&&\"\"===this.$control_input.val()&&!this.$activeItems.length&&(d=this.caretPos-1,d>=0&&d<this.items.length)?(e=this.options[this.items[d]],this.deleteSelection(b)&&(this.setTextboxValue(a.text.apply(this,[e])),this.refreshOptions(!0)),void b.preventDefault()):c.apply(this,arguments)}}()}),L});"],"sourceRoot":"/source/"}